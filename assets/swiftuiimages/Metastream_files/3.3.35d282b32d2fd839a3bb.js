(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{71:function(e,t,r){!function(t,a){e.exports=function(e){return webpackJsonpHotstarWebSDK__name_([0],[function(t,r){t.exports=e},,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SLATE_ACTION_TYPE=t.PLAYBACK_COMPOSITE_ERROR_TYPE=t.ENTITLEMENT_V1_ERROR_TYPE=t.REFRESH_TOKEN_ERROR_TYPE=t.trayWithoutMeta=t.PAGINATION_SIZE=t.trayTypeIdMap=t.trayTypeToSourceMap=t.apiSource=t.avsSubscribedUserStatus=t.contentPagination=t.skipMinimumCardsRule=t.skipTrayCall=t.defaultIsAllowPlayBackResponse=t.defaultIdentifyTrayResponse=t.defaultTrayResponse=t.imageTypes=t.trayTypes=void 0;var a=r(9),n=function(e){return e&&e.__esModule?e:{default:e}}(a),u=r(51),s=(t.trayTypes={EDITORIAL_TRAY:"EDITORIAL",NEWS_CLIPS_TRAY:"NEWS_CLIPS",POPULAR_TRAY:"POPULAR",MATCH_HIGHLIGHTS_TRAY:"SPORT_MATCH_HIGHLIGHTS",SPORTS_LIVE_TRAY:"SPORT_LIVE",SPORT_DAY_HIGHLIGHT:"SPORT_DAY_HIGHLIGHT",SPORTS_TRAY:"SPORTS_TRAY",SPORTS_REPLAY:"SPORT_REPLAY",DAILY_POPULAR_EPISODES:"DAILY_POPULAR_EPISODES",DAILY_POPULAR_CLIPS:"DAILY_POPULAR_CLIPS",DAILY_POPULAR_SPORTS:"DAILY_POPULAR_SPORTS",DAILY_POPULAR_SPORTS_CLIPS:"DAILY_POPULAR_SPORTS_CLIPS",POPULAR_LANGUAGE_GENRE_SERIES:"POPULAR_LANGUAGE_GENRE_SERIES",POPULAR_LANGUAGE_GENRE_MOVIES:"POPULAR_LANGUAGE_GENRE_MOVIES",POPULAR_LANGUAGE_GENRE_MOVIES_SERIES:"POPULAR_LANGUAGE_GENRE_MOVIES_SERIES",LANGUAGE_BASED_SERIES:"LANGUAGE_BASED_SERIES",LANGUAGE_BASED_MOVIE:"LANGUAGE_BASED_MOVIE",MOST_RECENT_EPISODE:"MOST_RECENT_EPISODE",MOST_RECENT_CLIPS:"MOST_RECENT_CLIPS",MOST_RECENT_MOVIE:"MOST_RECENT_MOVIE",MOST_RECENT_SERIES:"MOST_RECENT_SERIES",GENRE_BASED_SPORT_LIVE:"GENRE_BASED_SPORT_LIVE",LANGUAGE_GENRE_SPORT_HIGHLIGHTS:"LANGUAGE_GENRE_SPORT_HIGHLIGHTS",IPL_SLOMO_BANNER:"IPL_SLOMO_BANNER",PREMIUM_SERIES:"PREMIUM_SERIES",PREMIUM_MOVIES:"PREMIUM_MOVIES"},t.imageTypes={IMAGE_TYPE:{NEWS_CLIPS:"hs",SPORT:"hs",SPORT_MATCH_HIGHLIGHTS:"hs",SPORT_LIVE:"hs",SPORT_YMAL:"hs",ACN_SPORT_YMAL:"hs",DEFAULT:"hs",RECENT_FROM_MATCH:"hs",POPULAR_FOR_TOURNAMENT:"hs",YMAL_TRAYS:"hs",EPISODE:"hs",SEASON:"hsea",GAME:"hs"}},t.defaultTrayResponse=(0,n.default)({},u.baseTrayModel,{isPanic:!1,success:!0,message:""}),t.defaultIdentifyTrayResponse={trays:[]},t.defaultIsAllowPlayBackResponse={canWatch:"Y",message:""},t.skipTrayCall={contentTypes:["NEWS_LIVE"]},t.skipMinimumCardsRule=["SEASON","RECENT_FROM_MATCH"],t.contentPagination={becardPageSize:8,fecardPageSize:8,betrayPageSize:5,fetrayPageSize:5},t.avsSubscribedUserStatus=["SF","SC","SR"],t.apiSource={AVS:"avs",CMS:"cms",GRAVITY:"gravity",PERSONA:"persona"});t.trayTypeToSourceMap={catalog:s.CMS,px:s.CMS},t.trayTypeIdMap={CONTINUE_WATCHING:833,WATCHLIST:831,LEADERBOARD:420,PERSONA_WITH_META:851,PERSONA_WITHOUT_META:859,PERSONA_MASTHEAD:850},t.PAGINATION_SIZE=20,t.trayWithoutMeta=["catalog","px"],t.REFRESH_TOKEN_ERROR_TYPE={JWT_TOKEN_TAMPERED:"UMSP_601",USER_TOKEN_INVALIDATED:"ERR_UM_071"},t.ENTITLEMENT_V1_ERROR_TYPE={GEO:"GEO",CONCURRENCY:"CONCURRENCY",MAX_LIMIT_REACHED:"ERR_CON_041",USER_TOKEN_INVALIDATED:"ERR_CON_040",SUSPICIOUS_ACTIVITY:"ERR_CON_042",JWT_TOKEN_EXPIRED:"ERR_CON_043",JWT_TOKEN_TAMPERED:"ERR_CON_044",MALICIOUS_ACCESS_TO_PAID_CONTENT:"ERR_CON_047"},t.PLAYBACK_COMPOSITE_ERROR_TYPE={BAD_PLAYBACK_REQUEST:"ERR_PB_1401",USER_NOT_LOGGED_IN:"ERR_PB_1405",JWT_TOKEN_EXPIRED:"ERR_PB_1408",JWT_TOKEN_TAMPERED:"ERR_PB_1409",INVALID_CONTENT:"ERR_PB_1410",INSUFFICIENT_USER_PACK:"ERR_PB_1411",INACCESIBLE_CONTENT:"ERR_PB_1412",PLAYBACK_FETCH_ERROR:"ERR_PB_1413",TOO_MANY_REQUESTS:"ERR_PB_1414"},t.SLATE_ACTION_TYPE={GEO:"GEO",CONCURRENCY:"CONCURRENCY",LOG_IN:"LOGIN",PREMIUM:"PREMIUM",NETWORK_UNAVAILABLE:"NETWORK_UNAVAILABLE",BLANK:"BLANK",PLAYER_ERROR:"PLAYER_ERROR",ACC_LOGGED_OUT:"ACC_LOGGED_OUT"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){var r={};for(var a in e)0>t.indexOf(a)&&Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trayAssetsModel=t.trayPages=t.baseTrayModel=void 0;var a=r(0),n=a.utils.baseUtils,u={assets:{items:[],nextOffsetURL:"",page:0,pageSize:0,totalPages:0,totalResults:0},title:""},s={page:0,pageSize:0,totalPages:0,totalResults:0},i={meta:{duration:""},assetType:"VIDEO",detailApiURI:"",image:{imageType:0,path:""}};t.baseTrayModel=u=n.getNewObjectCopy(u),t.trayPages=s=n.getNewObjectCopy(s),t.trayAssetsModel=i=n.getNewObjectCopy(i),t.baseTrayModel=u,t.trayPages=s,t.trayAssetsModel=i},,,,,,,function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),u=a(n),s=r(1),i=a(s),o=r(2),c=a(o),d=r(84),l=a(d),f=r(0),p=a(f),h=r(85),v=a(h),g=p.default.config,y=p.default.utils,_=p.default.constants,E=_.RUC_MASTER_KEY,m=_.LPV_KEY,I=y.baseUtils;t.default=new(function(){function e(){(0,i.default)(this,e)}return(0,c.default)(e,[{key:"getGravityMode",value:function(){var e=g.initConfig.getConfig();return l.default.GRAVITY_MODE[e.env]||""}},{key:"shouldTrackRecClick",value:function(e){return l.default.REC_CLICK_TRACK_ORDER_ID.indexOf(e)>-1}},{key:"isMovieType",value:function(){return"MOVIE"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).subType}},{key:"isBYWTray",value:function(e){return[v.default.BYW_HOME_PAGE,v.default.BYW_MOVIE_LANDING_PAGE,v.default.BYW_TV_LANDING_PAGE].indexOf(e)>-1}},{key:"isShowImgRequired",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[v.default.CONTINUE_WATCHING,v.default.WATCH_LIST];return"EPISODE"===t.contentType&&r.indexOf(e)>-1}},{key:"getFilter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.orderId,r=void 0===t?"":t,a=l.default.REQUEST_FILTER[r]||l.default.DEFAULT_GRAVITY_FILTER,n=I.getNewObjectCopy(a);if("object"===(0,u.default)(n.scenarioId)&&(n.scenarioId=e[n.scenarioId.key]),"object"===(0,u.default)(n.isContext)){var s=n.isContext.key;e[s]&&(n.isContext=e[s])}if("object"===(0,u.default)(n.currentItemId)){var i=n.currentItemId.key;e[i]?n.currentItemId=e[i]:delete n.currentItemId}return e.offset&&(n.offset=e.offset),"NEW_PM"!==n.scenarioId&&(n.scenarioId=e.scenarioId||n.scenarioId),n}},{key:"getTopThreeLangsFromLpv",value:function(e){if(!e)return"";var t=window.localStorage,r=[],a=JSON.parse(t.getItem(E))||{},n=(a[m]||{})[e]||{},u=n.lpv||[];u.sort(function(e,t){return t.score-e.score});for(var s=0;3>s;s++){var i=(u[s]||{}).name;i&&r.push(i)}return r.join(",")}}]),e}())},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=t.meta,a=void 0===r?{}:r,n=a.contentId,u=void 0===n?"":n;return u?(e[u]=t,e):e}Object.defineProperty(t,"__esModule",{value:!0});var u=r(11),s=a(u),i=r(50),o=a(i),c=r(1),d=a(c),l=r(2),f=a(l);t.default=new(function(){function e(){var t=this;(0,d.default)(this,e),this.setWatchlist=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.assets,a=void 0===r?{}:r,u=e.userId,s=a.items,i=void 0===s?[]:s,o=t._getWatchlist(u);o.tray=e,o.add=i.reduce(n,{})},this.watchlist={}}return(0,f.default)(e,[{key:"resetWatchlist",value:function(){this.watchlist={}}},{key:"getTray",value:function(e){return this._getWatchlist(e.userId).tray}},{key:"addToWatchlist",value:function(e){var t=e.userId,r=(0,o.default)(e,["userId"]),a=r.contentId,n=void 0===a?"":a;if(!n)return!1;var u=this._getWatchlist(t);if(u.add[n])return!1;var i=u.add,c=u.tray;i[n]=r;var d=c.assets,l=void 0===d?{}:d,f=l.items,p=void 0===f?[]:f;return c.assets=l,c.assets.items=[r].concat((0,s.default)(p)),delete u.removal[n],!0}},{key:"removeFromWatchlist",value:function(e){var t=e.contentId,r=e.userId;if(!t)return!1;var a=this._getWatchlist(r);delete a.add[t],a.tray.assets.items=a.tray.assets.items.filter(function(e){return""+(e.contentId||"")!=""+(t||"")})}},{key:"_getWatchlist",value:function(e){if(!e)throw Error("Request does not contain user id");var t=this.watchlist[e]||function(){return{add:{},removal:{},tray:{}}}();return this.watchlist[e]=t,t}}]),e}())},function(e,t,r){e.exports={default:r(221),__esModule:!0}},,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,a,n){var u={};return Object.keys(a).forEach(function(e){u[e]=a[e]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},u),n&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(n):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(e,t,u),u=null),u}Object.defineProperty(t,"__esModule",{value:!0}),t.HotstarAVSCommonsService=void 0;var u,s,i,o=r(12),c=a(o),d=r(6),l=a(d),f=r(7),p=a(f),h=r(8),v=a(h),g=r(1),y=a(g),_=r(2),E=a(_),m=r(0),I=r(80),T=a(I),b={CDN_TOKEN_URL:"/get_cdn_token.php",MAXMIND_TOKEN_URL:"/akamaitoken-23.php"},k=new T.default,R=function(e,t){var r=e.queryData,a=void 0===r?{}:r,n=e.config,u=void 0===n?{}:n,s=a.apiEndpoint;return s||(s=""+(u[t]||b[t])),s},P=t.HotstarAVSCommonsService=(u=(0,m.responseAdapter)(k.getAuthTokenResponse),s=(0,m.responseAdapter)(k.generateTokenizedUrlResponse),i=function(){function e(){(0,y.default)(this,e)}return(0,E.default)(e,[{key:"getAuthToken",value:function(){var e=(0,v.default)(p.default.mark(function e(t){var r,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t,"CDN_TOKEN_URL"),a={},e.prev=2,e.next=5,m.HttpLib.get(r);case 5:a=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),a.errorDescription=e.t0;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"generateTokenizedUrl",value:function(){var e=(0,v.default)(p.default.mark(function e(t){var r,a,n,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R(t,"MAXMIND_TOKEN_URL"),a={},e.prev=2,n=t.params,u=(void 0===n?{}:n).url){e.next=7;break}throw Error("url param not sent to method");case 7:return r=r+"?url="+u,e.next=10,m.HttpLib.post(r);case 10:a=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a.errorDescription=e.t0;case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}},e,this,[[2,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getCuePoints",value:function(){var e=(0,v.default)(p.default.mark(function e(t){var r,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,m.HttpLib.get(t,{type:"xml"});case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r.isError=!0;case 10:return a="",r.isError||(a=r.text),e.abrupt("return",l.default.resolve(a));case 13:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getSNPRatings",value:function(){var e=(0,v.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,m.HttpLib.get(t);case 4:r=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",l.default.resolve({}));case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getAVSPanic",value:function(){var e=(0,v.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,m.HttpLib.get(t,{skipCache:!0});case 4:r=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",l.default.resolve({}));case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),n(i.prototype,"getAuthToken",[u],(0,c.default)(i.prototype,"getAuthToken"),i.prototype),n(i.prototype,"generateTokenizedUrl",[s],(0,c.default)(i.prototype,"generateTokenizedUrl"),i.prototype),i);t.default=(0,m.registerOperations)("AVS",P)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(9),u=a(n),s=r(3),i=a(s),o=r(1),c=a(o),d=r(4),l=a(d),f=r(5),p=a(f),h=r(81),v=a(h),g=r(0),y=new g.HttpStatusMessages({});t.default=function(e){function t(){var e,r,a,n;(0,c.default)(this,t);for(var s=arguments.length,o=Array(s),d=0;s>d;d++)o[d]=arguments[d];return r=a=(0,l.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(o))),a.getAuthTokenResponse=function(e){var t="OK"===e.status,r=y.getMessage("getAuthToken",e.errorDescription);return(0,u.default)({success:t,message:r},e)},a.generateTokenizedUrlResponse=function(e){var t=!!e.url,r=y.getMessage("generateTokenizedUrl",e.errorDescription);return(0,u.default)({success:t,message:r},e)},n=r,(0,l.default)(a,n)}return(0,p.default)(t,e),t}(v.default)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),u=a(n),s=r(2),i=a(s);t.default=function(){function e(){(0,u.default)(this,e)}return(0,i.default)(e,[{key:"isSuccessResponse",value:function(e){return"OK"===e.resultCode}},{key:"setIsPanic",value:function(e){return{errorType:"ACN_9999"===e.errorDescription?"panic":e.errorType}}},{key:"isInvalidLink",value:function(e){return"ACN_7105"===e.errorDescription||"ACN_7106"===e.errorDescription?"invalid":""}}]),e}()},,function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),u=a(n),s=r(37),i=a(s),o=r(18),c=a(o),d=r(28),l=a(d),f=r(1),p=a(f),h=r(2),v=a(h);t.default=new(function(){function e(){var t=this;(0,p.default)(this,e),this.getNewObjectCopy=function(e){return t.objClone({},e)},this.objClone=function(e,r){e=Array.isArray(r)?[]:{};try{for(var a in r)e[a]="object"===(0,l.default)(r[a])&&null!=r[a]?t.objClone({},r[a]):r[a]}catch(e){}return e}}return(0,v.default)(e,[{key:"isString",value:function(e){return"string"==typeof e}},{key:"isUndefined",value:function(e){return void 0===e}},{key:"isArray",value:function(e){return Array.isArray(e)}},{key:"isObject",value:function(e){return null!==e&&"object"===(void 0===e?"undefined":(0,l.default)(e))}},{key:"isEmptyObject",value:function(e){return this.isObject(e)&&0===(0,c.default)(e).length}},{key:"trim",value:function(e){return this.isString(e)?e.trim():e}},{key:"lowercase",value:function(e){return this.isString(e)?e.toLowerCase():e}},{key:"uppercase",value:function(e){return this.isString(e)?e.toUpperCase():e}},{key:"truncateString",value:function(e,t){return e&&""!==e&&e.length>t?e.substr(0,t):e}},{key:"safelyReturnNestedValue",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.reduce(function(e,t){return e&&e[t]?e[t]:r},t)}},{key:"updateUrlParameter",value:function(e,t,r){return e.replace(RegExp("("+t+"=)[^&]+"),"$1"+r)}},{key:"createQueryParam",value:function(e){var t=e.endpoint,r=void 0===t?"":t,a=e.data,n=void 0===a?{}:a,u=r.indexOf("?")>-1,s="";return s=(0,c.default)(n).map(function(e){return e+"="+n[e]}).join("&"),s=u?"&"+s:"?"+s}},{key:"pick",value:function(e,t){var r={};return t.forEach(function(t){e.hasOwnProperty(t)&&(r[t]=e[t])}),r}},{key:"setNestedProp",value:function(e,t,r){return t.split(".").reduce(function(e,t,a,n){return n.length-1>a?(e[t]instanceof Object||(e[t]={}),e[t]):e[t]=r},e)}},{key:"toQueryStringObject",value:function(){var e=/\s*([^=]+)=(.*)\s*/;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("&").map(function(t){return e.exec(t)}).filter(function(e){return null!==e}).reduce(function(e,t){var r=(0,i.default)(t,3);return e[r[1]]=r[2],e},{})}},{key:"combineCalls",value:function(e){var t=!1,r=Array(e.length),a=Array(e.length);return new u.default(function(n,s){var i=e.map(function(e,n){return e.then(function(e){r[n]=e},function(e){t=!0,a[n]=e})});return u.default.all(i).then(function(){t?s(a):n(r)})})}}]),e}())},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n,u,s=r(22),i=a(s),o=r(9),c=a(o),d=r(0),l=a(d),f=r(85),p=a(f),h=l.default.constants,v={SET:"set",RECO:"recommendation",EVENT:"event"},g=["itemId"],y={type:v.RECO,resultNames:g,numberLimit:20,currentItemId:{key:"contentId"}};t.default={DEFAULT_GRAVITY_FILTER:y,EVENT_TYPE:v,FECTH_CONTENT_KEYS:g,DEF_COOKIE_NAME:"stv_hotcookie",REC_CLICK_TRACK_ORDER_ID:[5,6,7,801,802,803,804,805,806,807,808,809,831,833,902,906,907,908],REQUEST_FILTER:(n={},(0,i.default)(n,p.default.MASTHEAD,(0,c.default)({scenarioId:"NEW_PM"},y,{numberLimit:5,isContext:{key:"scenarioId"}})),(0,i.default)(n,p.default.YMAL_HOME_PAGE,(0,c.default)({scenarioId:"MAIN_PAGE"},y)),(0,i.default)(n,p.default.YMAL_CLIP_WATCH_PAGE,(0,c.default)({scenarioId:"ITEM_PAGE"},y)),(0,i.default)(n,p.default.YMAL_MOVIE_DETAIL_PAGE,(0,c.default)({scenarioId:"ITEM_PAGE"},y)),(0,i.default)(n,p.default.YMAL_EPISODE_DETAIL_PAGE,(0,c.default)({scenarioId:"ITEM_PAGE"},y)),(0,i.default)(n,p.default.YMAL_SPORTS_WATCH_PAGE,(0,c.default)({scenarioId:"ITEM_PAGE"},y)),(0,i.default)(n,p.default.YMAL_MOVIE_LANDING_PAGE,(0,c.default)({scenarioId:"YMAL_MOVIE_TAB"},y)),(0,i.default)(n,p.default.YMAL_TV_LANDING_PAGE,(0,c.default)({scenarioId:"YMAL_TV_TAB"},y)),(0,i.default)(n,p.default.BYW_HOME_PAGE,(0,c.default)({},y,{scenarioId:"BECAUSE_YOU_WATCHED",numberLimit:63})),(0,i.default)(n,p.default.BYW_TV_LANDING_PAGE,(0,c.default)({},y,{scenarioId:"BYW_TV_TAB",numberLimit:63})),(0,i.default)(n,p.default.BYW_MOVIE_LANDING_PAGE,(0,c.default)({},y,{scenarioId:"BYW_MOVIE_TAB",numberLimit:63})),(0,i.default)(n,p.default.DUMMY_TRAY,(0,c.default)({isContext:"Home",scenarioId:{key:"language"}},y)),(0,i.default)(n,p.default.POPULAR_TV,(0,c.default)({isContext:"TV",scenarioId:{key:"language"}},y)),(0,i.default)(n,p.default.POPULAR_MOVIES,(0,c.default)({isContext:"Movies",scenarioId:{key:"language"}},y)),(0,i.default)(n,p.default.POPULAR_NEWS,(0,c.default)({isContext:"News",scenarioId:{key:"language"}},y)),(0,i.default)(n,p.default.POPULAR_SPORTS,(0,c.default)({isContext:"Sports",scenarioId:{key:"language"}},y)),(0,i.default)(n,p.default.POPULAR_PREMIUM,(0,c.default)({isContext:"Premium",scenarioId:{key:"language"}},y)),(0,i.default)(n,p.default.WATCH_LIST,(0,c.default)({scenarioId:{key:"language"}},y,{resultNames:[].concat(g,["seriesNameId"])})),(0,i.default)(n,p.default.CONTINUE_WATCHING,(0,c.default)({scenarioId:{key:"language"}},y,{resultNames:[].concat(g,["seriesNameId"])})),n),USE_JS_GEN_COOKIE:!1,GRAVITY_MODE:(u={},(0,i.default)(u,h.PROD_ENV,"PROD"),(0,i.default)(u,h.STAG_ENV,"PROD"),(0,i.default)(u,h.QA_ENV,"DEVELOP"),(0,i.default)(u,h.PP_ENV,"DEVELOP"),(0,i.default)(u,h.LOAD_ENV,"DEVELOP"),u),MAX_COUNT_PER_PAGE:20,DEDUPLICATION_TRAYS_ORDERID:[p.default.YMAL_HOME_PAGE,p.default.YMAL_MOVIE_LANDING_PAGE,p.default.YMAL_TV_LANDING_PAGE,p.default.BYW_HOME_PAGE,p.default.BYW_MOVIE_LANDING_PAGE,p.default.BYW_TV_LANDING_PAGE]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MASTHEAD:1,YMAL_HOME_PAGE:5,YMAL_MOVIE_LANDING_PAGE:6,YMAL_TV_LANDING_PAGE:7,BYW_HOME_PAGE:801,BYW_TV_LANDING_PAGE:802,BYW_MOVIE_LANDING_PAGE:803,DUMMY_TRAY:804,POPULAR_TV:805,POPULAR_MOVIES:806,POPULAR_NEWS:807,POPULAR_SPORTS:808,POPULAR_PREMIUM:809,WATCH_LIST:831,CONTINUE_WATCHING:833,YMAL_EPISODE_DETAIL_PAGE:902,YMAL_SPORTS_WATCH_PAGE:906,YMAL_CLIP_WATCH_PAGE:907,YMAL_MOVIE_DETAIL_PAGE:908}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n,u,s=r(22),i=a(s);t.getJsServlet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.PROD_ENV,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"in",r=(l[t]||l.default)[e]||{};return"//"+r.ENV+"/grrec-"+r.APP+"-war/JSServlet4?cc=1"},t.getGravityUrlPath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.PROD_ENV,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"in",r=(l[t]||l.default)[e]||{};return"https://"+r.ENV+"/grrec-"+r.APP+"-war/WebshopServlet/getItemRecommendation"},t.getRecoJsUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.PROD_ENV,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"in",r=(l[t]||l.default)[e]||{};return"//"+r.ENV+"/js/"+r.APP+"/gr_reco5.min.js"};var o=r(0),c=a(o),d=c.default.constants,l={in:(n={},(0,i.default)(n,d.PROD_ENV,{ENV:"hotstar-sin.gravityrd-services.com",APP:"hotstar"}),(0,i.default)(n,d.QA_ENV,{ENV:"hotstar_t-sin.gravityrd-services.com",APP:"hotstar_t"}),(0,i.default)(n,d.PP_ENV,{ENV:"hotstar_t-sin.gravityrd-services.com",APP:"hotstar_t"}),(0,i.default)(n,d.LOAD_ENV,{ENV:"hotstar_t-sin.gravityrd-services.com",APP:"hotstar_t"}),(0,i.default)(n,d.STAG_ENV,{ENV:"hotstar-sin.gravityrd-services.com",APP:"hotstar"}),n),default:(u={},(0,i.default)(u,d.PROD_ENV,{ENV:"hotstaramerica-sjc.gravityrd-services.com",APP:"hotstaramerica"}),(0,i.default)(u,d.QA_ENV,{ENV:"hotstaramerica-sjc.gravityrd-services.com",APP:"hotstaramerica"}),(0,i.default)(u,d.PP_ENV,{ENV:"hotstaramerica-sjc.gravityrd-services.com",APP:"hotstaramerica"}),(0,i.default)(u,d.LOAD_ENV,{ENV:"hotstaramerica-sjc.gravityrd-services.com",APP:"hotstaramerica"}),(0,i.default)(u,d.STAG_ENV,{ENV:"hotstaramerica-sjc.gravityrd-services.com",APP:"hotstaramerica"}),u)};t.default=l},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,a,n){var u=a;switch(e){case"EPISODE":case"SEASON":case"SERIES":case"SHOW_LIVE":case"NEWS_LIVE":u=t;break;case"SPORT":case"SPORT_LIVE":case"SPORT_MATCH_HIGHLIGHTS":case"SPORT_DAY_HIGHLIGHTS":case"SPORT_REPLAY":u=r;break;case"CLIPS":case"NEWS_CLIPS":case"NEWS_BREAKING":u=n;break;default:u=a}return u}function u(e){var t=e.replace("http://media","https://secure-media");return t=(t=t.replace("-starag.startv.in",".hotstar.com")).trim()}function s(e){return e?"long_form":"short_form"}function i(e,t){return t.replace("[ID_MOD_100]",(""+e).slice(-2)).replace("[ID]",""+e)}function o(e){return e.indexOf("EPISODE")>-1?"EPISODE":e.indexOf("SPORT")>-1?"SPORT":e.indexOf("NEWS")>-1?"NEWS":e.indexOf("MOVIE")>-1?"MOVIE":e.indexOf("TV")>-1?"SERIES":"CLIPS"}function c(e){return e&&e.indexOf("LIVE")>-1}function d(e){return e===b}function l(e){e.castDisabled=!e.castEnabled;var t="";return(0,T.default)(k).forEach(function(r){e[r]&&(t=t+k[r]+";")}),t.slice(0,-1)}function f(e,t){var r="";if(""!==e&&t&&t.length&&t.length>0)for(var a=0;t.length>a;a++){var n=t[a];if(e===n.categoryId){r=n.categoryName;break}}return r}function p(e){var t={},r=e.type,a=e.contentTitle,n=e.title,u=e.showName,s=e.secondaryTitle,i=void 0===s?"":s;return t.primaryTitle=a,t.secondaryTitle="",r.indexOf("CLIP")>-1?t.secondaryTitle=i:r.indexOf("EPISODE")>-1&&(t.primaryTitle=u,t.secondaryTitle=n),t}function h(e,t,r,a,u){var i=t.contentType,o=void 0===i?"":i,c=t.showId,d=void 0===c?0:c,l=t.seasonId,f=void 0===l?0:l,p=t.categoryId,h=void 0===p?"":p,v=n(o,d,f,h,u),g={},y=e.cuepointsMidroll;return r&&(y=""),y||(g={cuepointsMidroll:""}),(0,m.default)({},e,{vpcategory:v,cf:s(a)||"NOT_FOUND"},g)}function v(e){var t=e.item,r=void 0===t?{}:t,a=e.variantsList,n=void 0===a?[]:a,u={};return u.pcExtendedRatings=l(r),u.variantlist=n,u.legacy_details=r,u}function g(e){return!(!e.premium&&!e.live)}Object.defineProperty(t,"__esModule",{value:!0});var y=r(28),_=a(y),E=r(17),m=a(E),I=r(18),T=a(I);t.getCid=n,t.getChannelRegionUrl=u,t.getCfParamVpz=s,t.getCuePointUrl=i,t.getContentType=o,t.isLive=c,t.isAdult=d,t.getPcExtendedRating=l,t.getTournamentName=f,t.getLabelsForMetaData=p,t.getAdMetaData=h,t.getMetaDataOfWatchPage=v,t.isContentSubscribed=g,t.generateTagsString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";";if("object"!==(void 0===e?"undefined":(0,_.default)(e))||!(0,T.default)(e).length)return"";var r=[];return(0,T.default)(e).sort().forEach(function(t){r.push(t+":"+e[t])}),r.join(t)};var b=3,k={disney:"A",fox:"H",castDisabled:"D",hboContent:"H",supportSimulcast:"T",premium:"S"};t.default={getCfParamVpz:s,getChannelRegionUrl:u,getCid:n,getCuePointUrl:i,getTournamentName:f,isAdult:d,isContentSubscribed:g,getMetaDataOfWatchPage:v,getContentType:o,getPcExtendedRating:l,isLive:c,getAdMetaData:h,getLabelsForMetaData:p}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={GET_VIDEOURL_EXCEPTION:{code:"CMS-GV-101",message:"unknown exception"},GET_VIDEOURL_REQUEST_PLAYBACK_URI_MISSING:{code:"CMS-GV-102",message:"playback uri is missing in request"},GET_VIDEOURL_REQUEST_DRM_TAG_INVALID:{code:"CMS-GV-103",message:"drm-tag is not a string"},GET_VIDEOURL_RESPONSE_INVALID_PAYLOAD:{code:"CMS-GV-121",message:"invalid payload"},GET_VIDEOURL_RESPONSE_PLAYBACK_URL_MISSING:{code:"CMS-GV-122",message:"playback url is missing in response"},GET_VIDEOURL_RESPONSE_LICENSE_MISSING:{code:"CMS-GV-123",message:"license url is missing in the response"},GET_VIDEOURL_RESPONSE_MISSING_PLATFORM:{code:"CMS-GV-151",message:"platform code invalid"},GET_VIDEOURL_RESPONSE_INVALID_DRM_TAG:{code:"CMS-GV-152",message:"invalid drm tag response"},GET_VIDEOURL_RESPONSE_INVALID_COUNTRY_CODE:{code:"CMS-GV-153",message:"invalid country code response"},GET_VIDEOURL_RESPONSE_UNKNOWN_SERVER_ERROR:{code:"CMS-GV-154",message:"unknown error in response"},GET_VIDEOURL_RESPONSE_CONTENT_NOT_FOUND:{code:"CMS-GV-155",message:"content not found"},GET_VIDEOURL_RESPONSE_HOOQ_API_ERROR:{code:"CMS-GV-156",message:"hooq play api failed"}}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,a,n){var u={};return Object.keys(a).forEach(function(e){u[e]=a[e]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},u),n&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(n):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(e,t,u),u=null),u}Object.defineProperty(t,"__esModule",{value:!0});var u,s,i,o,c,d,l,f,p,h,v,g,y=r(12),_=a(y),E=r(249),m=a(E),I=r(11),T=a(I),b=r(60),k=a(b),R=r(17),P=a(R),C=r(18),A=a(C),O=r(9),S=a(O),w=r(264),x=a(w),N=r(6),M=a(N),D=r(37),L=a(D),U=r(7),W=a(U),V=r(8),G=a(V),j=r(1),H=a(j),Y=r(2),q=a(Y),F=r(0),B=r(116),K=a(B),z=r(117),Q=a(z),J=r(33),X=a(J),Z=r(38),$=a(Z),ee=r(269),te=a(ee),re=r(270),ae=r(118),ne=a(ae),ue=r(19),se=r(119),ie=r(59),oe=a(ie),ce=new K.default,de=new X.default,le=new $.default,fe=new te.default,pe=F.utils.baseUtils;t.default=(u=(0,F.responseAdapter)(fe.getContinueWatchingTrayResponse),s=(0,F.responseAdapter)(fe.fetchCWTrayResponse),i=(0,F.requestAdapter)(fe.removeCWItemRequest),o=(0,F.responseAdapter)(fe.fetchLocalCWTrayResponse),c=(0,F.requestAdapter)(fe.updateLocalCWDataRequest),d=(0,F.responseAdapter)(fe.getContentDetailsResponse),l=(0,F.requestAdapter)(fe.updateCWTrayItemRequest),f=(0,F.responseAdapter)(fe.getLpvHeaderResponse),p=(0,F.responseAdapter)(fe.getWatchNextResponse),h=(0,F.responseAdapter)(fe.fetchPersonaTrayResponse),v=(0,F.responseAdapter)(fe.getWatchlistResponse),g=function(){function e(){(0,H.default)(this,e),this.calculateWatchPercentage=function(e,t){return Math.floor(e*t/100)},this.shouldDisplayTag=function(e){return.05>e},this.apiRegistry=Q.default}return(0,q.default)(e,[{key:"rucSetModule",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r=t.reqModule,a=void 0===r?"":r,n=t.reqData,u=void 0===n?{}:n;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.LocalStorageInterface.rucSetModule({reqModule:a,reqData:u}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"rucSetItem",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r=t.reqModule,a=void 0===r?"":r,n=t.reqKey,u=void 0===n?"":n,s=t.reqData,i=void 0===s?{}:s;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.LocalStorageInterface.rucSetItem({reqModule:a,reqKey:u,reqData:i}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"rucGetItem",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r=t.reqModule,a=void 0===r?"":r,n=t.reqKey,u=void 0===n?"":n;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.LocalStorageInterface.rucGetItem({reqModule:a,reqKey:u}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"rucChkIfValid",value:function(){var e=(0,G.default)(W.default.mark(function e(t){return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"rucRemoveItem",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r=t.reqModule,a=void 0===r?"":r,n=t.reqKey,u=void 0===n?"":n;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.LocalStorageInterface.rucRemoveItem({reqModule:a,reqKey:u}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"rucClearAll",value:function(){var e=(0,G.default)(W.default.mark(function e(t){return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"rucSyncServer",value:function(){var e=(0,G.default)(W.default.mark(function e(t){return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCwWithLocalBackup",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n,u,s,i,o,c,d;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.config,a=this.fetchCWTray(t),n=this.fetchLocalCWTray(t),u=[a],r.skipCache||u.push(n),e.next=7,M.default.all(u);case 7:return s=e.sent,i=(0,L.default)(s,2),o=i[0],c=i[1],d=void 0===c?[]:c,e.abrupt("return",{apiCWTray:o,localCWTray:d});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getContinueWatchingTray",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f,p,h,v,g,y,_;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.config,a=void 0===r?{}:r,n=t.userId,u=t.offset,n&&F.canUseDOM){e.next=4;break}return console.error("Invalid scenario to call CW from persona: canUseDOM: "+F.canUseDOM+", userId: "+n,t),e.abrupt("return",{data:[],offset:u});case 4:return e.next=6,this.fetchCwWithLocalBackup(t);case 6:return s=e.sent,i=s.apiCWTray,o=s.localCWTray,c=i.data.token,o=this._filterOutStaleData(o,i),d=(d=this.mergeCWTrayData(o,i.data.items)).filter(this._filterBasedOnWatchedValue).sort(this._sortDescCWData),l=d.map(this._getContentIds),f=(0,x.default)(d.reduce(this._getShowContentIds,{})),p=this.getContentDetails({contentIds:l,config:a}),h=this.getContentDetails({contentIds:f,config:a}),e.next=19,M.default.all([p,h]);case 19:if(v=e.sent,g=(0,L.default)(v,2),y=g[0],_=g[1],d=this._addContentMeta(y,d),d=this._getUniqueItemPerShow(d),d=this._addShowPoster(_,d),a.skipCache){e.next=29;break}return e.next=29,this.updateLocalCWData({userId:n,cwTray:this._getParsedLocalTray(d)});case 29:return e.abrupt("return",{data:d,offset:u,token:c});case 30:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_addContentMeta",value:function(e,t){return t.filter(function(t){return!!e[t.item_id]}).map(function(t){var r=t.watched,a=t.tag,n=t.timestamp,u=t.showContentId,s=100*r,i=e[t.item_id];return i.meta=(0,S.default)({},i.meta||{},{percentage:s}),(0,S.default)({},i,{percentage:s,showContentId:u,isCWItem:!0,isNextEpisode:"NEXT_EPISODE"===a,isNewEpisode:"NEW_EPISODE"===a,tag:a,timestamp:n})})}},{key:"_getUniqueItemPerShow",value:function(e){var t={};return e.filter(function(e){var r=e.showId;return!r||!t[r]&&(t[r]=e.contentId,!0)})}},{key:"_addShowPoster",value:function(e,t){return t.map(function(t){var r=t.showContentId;if(!r)return t;var a=e[r];return a?(t.imgContentId=r,t.image=le.extractImageData(a),t):t})}},{key:"_getParsedLocalTray",value:function(e){return e.map(function(e){return{item_id:e.contentId,watched:e.percentage/100,showContentId:e.showContentId,showId:e.showId,tag:e.tag,timestamp:e.timestamp}})}},{key:"_sortDescCWData",value:function(e,t){return t.timestamp-e.timestamp}},{key:"_filterBasedOnWatchedValue",value:function(e){return e.watched>.05&&.95>e.watched||e.tag}},{key:"_getContentIds",value:function(e){return e.item_id}},{key:"_getShowContentIds",value:function(e,t){var r=t.showContentId;return r&&(e[r]=r),e}},{key:"_filterOutStaleData",value:function(e,t){if(!t.data.updatedAt)return e;var r={};return(0,x.default)(e).forEach(function(e){e.timestamp>t.data.updatedAt&&(r[e.item_id]=e)}),r}},{key:"fetchCWTrayWithLocalBackup",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n,u,s;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchCwWithLocalBackup(t);case 2:return r=e.sent,a=r.apiCWTray,n=r.localCWTray,u=this._normalizeLocalCwTrayData(n,t),s=this._mergeCwData(a,u,t),e.abrupt("return",s);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_normalizeLocalCwTrayData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r={data:{},status:!0},a=e,n={orderedContentIds:(0,A.default)(a),items:a};return r.data=(0,P.default)({},n,{reqContentIds:t.contentIds,reqShowId:t.showId}),r}},{key:"_mergeCwData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e;try{(a=JSON.parse((0,k.default)(e))).data=a.data||{},a.data.items={},a.data.orderedContentIds=[];var n=a.data||{},u=n.items,s=void 0===u?{}:u,i=n.orderedContentIds,o=void 0===i?[]:i,c=r.contentIds,d=void 0===c?[]:c,l=r.showId,f=e.data||{},p=f.items,h=void 0===p?{}:p,v=f.orderedContentIds,g=void 0===v?[]:v,y=t.data||{},_=y.items,E=void 0===_?{}:_,I=y.orderedContentIds,b=void 0===I?[]:I,R=!!l,P=[].concat((0,T.default)(new m.default([].concat((0,T.default)(g),(0,T.default)(b))))),C=-1/0,A=R&&P.reduce(function(e,t){var r=h[t]||E[t]||{},a=r.timestamp||0;if(r.showId!==l)return e;var n=a>C;return n&&(C=a),n?t:e},void 0);P.forEach(function(e){var t=!!h[e],r=E[e]||{},a=h[e]||{},n=t&&a.timestamp>r.timestamp,u=(n?a:r)||{},i=d.includes(e)||r.showId===l,c=e===A,f=!R&&i;(R&&c||f)&&(o.push(e),s[e]=u)})}catch(e){}return a}},{key:"fetchCWTray",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,re.NetworkInterface.fetchCwTray(t);case 4:r=e.sent,r=JSON.parse((0,k.default)(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("fetchCWTray error",e.t0);case 11:return e.abrupt("return",{request:t,response:r});case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"removeCWItem",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n,u,s,i,o,c,d;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},t){e.next=3;break}return e.abrupt("return",r);case 3:return a=t.userId,n=t.contentIds,u=t.config,s=void 0===u?{}:u,e.prev=4,i=s.ENABLE_CAPE_CW?(0,S.default)({},ce._getRequestHeaders(s),ne.default.getLpvAndSubsStatusObj(a,s)):{hotstarauth:ce.getAuthToken()},o={headers:i,data:{items:n}},s.PERSONA_API_TIMEOUT&&(o.apiTimeOut=s.PERSONA_API_TIMEOUT),c={pathVars:{userId:a}},d=this.apiRegistry.getPath(c,"continueWatchingTray"),e.next=12,F.HttpLib.delete(d,o);case 12:r=e.sent,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.error("Failed to remove an item from cw",e.t0);case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}},e,this,[[4,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLocalCWTray",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n,u;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,a=t.contentIds,n=void 0===a?[]:a,u={},e.prev=2,e.next=5,this.rucGetItem({reqModule:"persona-cw",reqKey:r});case 5:if(e.t0=e.sent){e.next=8;break}e.t0={};case 8:(u=e.t0)&&u.timestamp&&delete u.timestamp,n.length&&(u=pe.pick(u,n)),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(2),console.error("Error while fetching local CW tray",e.t1);case 16:return e.abrupt("return",u);case 17:case"end":return e.stop()}},e,this,[[2,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getWatchPercentage",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f,p,h,v,g;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=0,a=t.personaData,n=void 0===a?{}:a,u=t.content,s=u.contentId,i=u.duration,!n.config||!n.config.ENABLE_CAPE_CW){e.next=14;break}return e.next=6,this.fetchCwWithLocalBackup(n);case 6:o=e.sent,c=o.apiCWTray,d=o.localCWTray,l=this.mergeCWTrayData(d,c.data.items),f=l.filter(function(e){return e.item_id===s}),p=(0,L.default)(f,1),h=p[0],r=(void 0===h?{}:h).watched||0,e.next=19;break;case 14:return v={reqModule:"content-bookmark",reqKey:s},e.next=17,this.rucGetItem(v,"RUC");case 17:(g=e.sent)&&g.lastWatchedTime&&(r=g.lastWatchedTime/i);case 19:return r=100*r||0,e.abrupt("return",r);case 21:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"mergeCWTrayData",value:function(e,t){var r=this,a=pe.getNewObjectCopy(t);return(0,A.default)(e).forEach(function(n){var u=e[n],s=t[n]||{timestamp:-1};if(u.timestamp>s.timestamp){if(u=pe.getNewObjectCopy(u),s.item_id){var i="";r.shouldDisplayTag(u.watched)&&(i=s.tag),u=(0,S.default)({},s,{watched:u.watched,timestamp:u.timestamp,tag:i})}a[n]=u}}),(0,x.default)(a)}},{key:"updateLocalCWData",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("Invalid request to update CW data. Request : "+t),e.abrupt("return",!1);case 3:return r=t.userId,a=t.cwTray,n=!1,e.prev=5,e.next=8,this.rucSetItem({reqModule:"persona-cw",reqKey:r,reqData:a});case 8:n=!!e.sent,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(5);case 13:return n||console.error("Failed to update CW data. User: "+r+" Data: "+a),e.abrupt("return",n);case 15:case"end":return e.stop()}},e,this,[[5,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getContentDetails",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n=t.contentIds,u=t.config,s=t.useCategoryApi;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},n.length){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,a={contentIds:n,config:u,useCategoryApi:s},e.next=7,de.getMultiGetContent(a);case 7:return r=e.sent,e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",M.default.reject(e.t0));case 14:case"end":return e.stop()}},e,this,[[3,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"updateCWTrayItem",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f,p;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("Inavalid request: updateCWTrayItem params: "+t),e.abrupt("return",!1);case 3:return r=t.contentId,a=t.percentage,n=t.userId,u=t.showId,s=void 0===u?"":u,i=t.contentType,o=void 0===i?"":i,c=t.removed,d=void 0!==c&&c,o=o.toLowerCase(),e.next=7,this.fetchLocalCWTray({userId:n});case 7:return l=e.sent,f={item_id:r,watched:a/100,timestamp:Date.now()},"episode"===o&&s&&(f.showId=s,l=this._removeShowData(l,s)),d&&(f.removed=!0),l[r]=f,e.next=14,this.updateLocalCWData({userId:n,cwTray:(0,x.default)(l)});case 14:return p=e.sent,e.abrupt("return",p);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_removeShowData",value:function(e,t){t+="";var r={};return(0,x.default)(e).forEach(function(e){e.showId+""!==t&&(r[e.item_id]=e)}),r}},{key:"cleanLocalCWData",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("Inavalid request: cleanLocalCWData params: "+t),e.abrupt("return",!1);case 3:return e.next=5,this.rucGetItem({reqModule:"persona-cw"});case 5:if(e.t0=e.sent){e.next=8;break}e.t0={};case 8:return r=e.t0,a=r[t]||{},e.next=12,this.rucRemoveItem({reqModule:"persona-cw"});case 12:return e.next=14,this.rucSetItem({reqModule:"persona-cw",reqKey:t,reqData:a});case 14:return e.abrupt("return",!!e.sent);case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLpv",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n,u;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userId,a=t.config,n=void 0===a?{}:a,r){e.next=3;break}return e.abrupt("return",{});case 3:return e.next=5,re.NetworkInterface.fetchLpv(t);case 5:return(u=e.sent).status&&!n.skipCache&&re.LocalStorageInterface.setLpv({userId:r,lpvData:u.data}),e.abrupt("return",u);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"postLpv",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f,p;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userId,a=t.config,n=void 0===a?{}:a,u=t.data,s=void 0===u?{}:u,i={},o={},r){e.next=5;break}return e.abrupt("return",o);case 5:return e.prev=5,c="json",d=ce.getAuthToken(),l={hotstarauth:d},f={pathVars:{userId:r}},p=this.apiRegistry.getPath(f,"postLpv"),n.PERSONA_API_TIMEOUT&&(i.apiTimeOut=n.PERSONA_API_TIMEOUT),i={type:c,data:s,headers:l,expireAt:-1},e.next=15,F.HttpLib.post(p,i);case 15:o=e.sent,e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),console.warn("Error while fetching LPV",e.t0),o=M.default.reject(e.t0);case 22:return e.abrupt("return",o);case 23:case"end":return e.stop()}},e,this,[[5,18]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getLpvHeader",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n,u;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userId,a=t.config,n=void 0===a?{}:a,r){e.next=3;break}return e.abrupt("return",{});case 3:if(u={},n.skipCache){e.next=8;break}return e.next=7,re.LocalStorageInterface.getLpv({userId:r});case 7:u=e.sent;case 8:if(u&&u.lpv_bucketed){e.next=12;break}return e.next=11,this.fetchLpv(t);case 11:u=e.sent;case 12:return e.abrupt("return",u.lpv_bucketed||{});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getWatchNext",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n,u,s,i;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,e.prev=1,a=t.config,n=void 0===a?{}:a,e.next=5,re.NetworkInterface.fetchWatchNext(t);case 5:if(r=e.sent,(u=r.data.items||[]).length&&u[0]){e.next=9;break}throw Error("Unable get the next video");case 9:return e.next=11,this.getContentDetails({contentIds:u,config:n});case 11:if(s=e.sent,ne.default.hasContentDetails(r,s)){e.next=15;break}throw Error("Multiget lookup failed");case 15:return r=(0,P.default)({},r,{multiContentMap:s}),e.abrupt("return",r);case 19:return e.prev=19,e.t0=e.catch(1),i=(0,S.default)({},r,{status:!1,error:e.t0}),e.abrupt("return",M.default.reject(i));case 23:case"end":return e.stop()}},e,this,[[1,19]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPersonaTray",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a,n,u;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,a=t.trayTypeId,n=t.config,u=void 0===n?{}:n,e.next=5,re.NetworkInterface.fetchPersonaTrayData(t,t.addIdentifier);case 5:if(r=e.sent,(0,A.default)(r).length){e.next=8;break}throw Error("fetchPersonaTray: Page end reached");case 8:e.t0=a,e.next=e.t0===ue.trayTypeIdMap.PERSONA_WITH_META?11:e.t0===ue.trayTypeIdMap.PERSONA_MASTHEAD?11:e.t0===ue.trayTypeIdMap.PERSONA_WITHOUT_META?12:17;break;case 11:return e.abrupt("break",17);case 12:return r.data.itemids=r.data.items,e.next=15,this.getContentDetails({contentIds:r.data.itemids,config:u});case 15:return r.data.items=e.sent,e.abrupt("break",17);case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(1),r={};case 22:return e.abrupt("return",{request:t,resp:r});case 23:case"end":return e.stop()}},e,this,[[1,19]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getWatchlist",value:function(){var e=(0,G.default)(W.default.mark(function e(t){var r,a;return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},e.prev=1,a=oe.default.getTray(t),!(0,A.default)(a).length){e.next=8;break}(r=a).cache=!0,e.next=11;break;case 8:return e.next=10,re.NetworkInterface.fetchWatchlist(t);case 10:r=e.sent;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),r={status:!1};case 16:return e.abrupt("return",{request:t,response:r});case 17:case"end":return e.stop()}},e,this,[[1,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"addToWatchlist",value:function(){var e=(0,G.default)(W.default.mark(function e(t){return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{oe.default.addToWatchlist(t),re.NetworkInterface.watchlistItemOperation(t,se.WL_OPERATIONS.ADD)}catch(e){console.error("addToWatchlist error",e)}return e.abrupt("return",!0);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeFromWatchlist",value:function(){var e=(0,G.default)(W.default.mark(function e(t){return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{oe.default.removeFromWatchlist(t),re.NetworkInterface.watchlistItemOperation(t,se.WL_OPERATIONS.DELETE)}catch(e){console.error("removeFromWatchlist error",e)}return e.abrupt("return",!0);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setWatchlistCache",value:function(){var e=(0,G.default)(W.default.mark(function e(t){return W.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:oe.default.setWatchlist(t);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),n(g.prototype,"getContinueWatchingTray",[u],(0,_.default)(g.prototype,"getContinueWatchingTray"),g.prototype),n(g.prototype,"fetchCWTray",[s],(0,_.default)(g.prototype,"fetchCWTray"),g.prototype),n(g.prototype,"removeCWItem",[i],(0,_.default)(g.prototype,"removeCWItem"),g.prototype),n(g.prototype,"fetchLocalCWTray",[o],(0,_.default)(g.prototype,"fetchLocalCWTray"),g.prototype),n(g.prototype,"updateLocalCWData",[c],(0,_.default)(g.prototype,"updateLocalCWData"),g.prototype),n(g.prototype,"getContentDetails",[d],(0,_.default)(g.prototype,"getContentDetails"),g.prototype),n(g.prototype,"updateCWTrayItem",[l],(0,_.default)(g.prototype,"updateCWTrayItem"),g.prototype),n(g.prototype,"getLpvHeader",[f],(0,_.default)(g.prototype,"getLpvHeader"),g.prototype),n(g.prototype,"getWatchNext",[p],(0,_.default)(g.prototype,"getWatchNext"),g.prototype),n(g.prototype,"fetchPersonaTray",[h],(0,_.default)(g.prototype,"fetchPersonaTray"),g.prototype),n(g.prototype,"getWatchlist",[v],(0,_.default)(g.prototype,"getWatchlist"),g.prototype),g)},,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),u=a(n),s=r(9),i=a(s),o=r(1),c=a(o),d=r(58),l=a(d),f=r(38),p=a(f),h=new p.default;t.default=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[2],a=r.orderId,n=void 0===a?"":a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,c.default)(this,e);try{var o=t.itemId,d=s[o];if(d){d.meta=(0,i.default)({},h.setMetaForAsset(d),d.meta),(0,u.default)(this,d);var f=t.seriesNameId,p=t.percentage;l.default.isShowImgRequired(n,d)&&(this.imgContentId=f,this.image=h.extractImageData(this)),p&&(this.meta.percentage=p,this.percentage=p)}}catch(e){console.warn("GravityCardDetail Exception::",t.itemId,e)}}},,function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(7),u=a(n),s=r(18),i=a(s),o=r(9),c=a(o),d=r(17),l=a(d),f=r(8),p=a(f),h=r(3),v=a(h),g=r(1),y=a(g),_=r(2),E=a(_),m=r(4),I=a(m),T=r(5),b=a(T),k=r(38),R=a(k),P=r(111),C=a(P),A=r(242),O=a(A),S=r(243),w=r(0),x=r(87),N=r(19),M=r(88),D=a(M),L=new w.HttpStatusMessages({}),U=w.utils.baseUtils;t.default=function(e){function t(){var e,r,a,n,s=this;(0,y.default)(this,t);for(var o=arguments.length,d=Array(o),f=0;o>f;f++)d[f]=arguments[f];return r=a=(0,I.default)(this,(e=t.__proto__||(0,v.default)(t)).call.apply(e,[this].concat(d))),a.getMovieDataResponse=function(e){return a.getContentDetailsResponse(e)},a.getEpisodeDataResponse=function(e){return a.getContentDetailsResponse(e)},a.getShowDataResponse=function(e){return a.getContentDetailsResponse(e)},a.getClipDataResponse=function(e){return a.getContentDetailsResponse(e)},a.getMatchDataResponse=function(e){return a.getContentDetailsResponse(e)},a.getTraysRequest=function(e){return e},a.getTraysResponse=function(e){var t={};try{t.items=e.traysResp,t.request=e.traysReq,t.allTraysFetched=e.allTraysFetched}catch(e){t.items=[],t.request={},t.allTraysFetched=!0}return t},a.getContentDetailsResponse=function(){var e=(0,p.default)(u.default.mark(function e(t){var r,n,o,d,f,p,h,v,g,y,_,E,m,I,T,b,k,R,P,C,A,S,w,M,D,W,V,G,j,H,Y,q,F,B;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t&&!t.isError){e.next=3;break}return e.abrupt("return",t);case 3:if(r={},n=t.contentStartPointSeconds,o=t.clipType,d=t.config,f=t.contentDetails,p=void 0===f?{}:f,h=t.videoPlazaSettings,v=t.reqParams,g=t.isLiveMatch,y=t.originalReq,_=a.isSuccessResponse(p),E=L.getMessage("getContentDetails",p.errorDescription),m=d.DEFAULT_CLIP_CATEGORYID,I=v.context,T=v.isSubscribed,b=v.isPremiumUser,k=p.results,C=(P=(R=void 0===k?{}:k)||{})&&P.item,P){e.next=14;break}return e.abrupt("return",{assetType:"",content:(0,l.default)({},O.default),success:_,message:E});case 14:return A={},S=a.setMetaForAsset(C),w=S.contentType||"",U.isUndefined(I)&&(I="VOD"),M=parseInt(C.parentalRating,10)||0,C&&((A={isSubTagged:C.isSubTagged||!1,features:C.features,adGroupId:C.adGroupId+""||"",id:C.id,archived:C.archived,contentId:""+C.contentId,broadcastDate:C.broadCastDate?C.broadCastDate:0,duration:C.duration?C.duration:0,genre:C.genre&&C.genre.length>0&&C.genre[0]||"",genres:C.genre,drmProtected:C.encrypted,seasonNo:C.seasonNo,contentTitle:C.title,contentProvider:C.contentProvider,externalContentId:C.externalContentId,playbackUri:C.playbackUri,isNew:"Y"===C.isNew,lang:C.lang?C.lang[0]:"",showId:C.showId,showContentId:C.showContentId,gameName:C.gameName,trailerParents:C.trailerParents,showName:C.showName?U.truncateString(C.showName,47):"",channelName:C.channelName?C.channelName:"",channelId:C.channelId?C.channelId:"",description:C.description,disney:C.disney,fox:C.fox,freemium:C.freemium,live:C.live,premium:C.premium,vip:C.vip,playbackType:C.playbackType,publishDate:C.broadCastDate?1e3*parseInt(C.broadCastDate,10):0,seasonId:C.seasonId,seriesId:C.showId,seasonName:C.seasonName||"",sportsSeasonId:C.sportsSeasonId,contentType:w,type:w,startDate:C.startDate,originalReq:y,meta:(0,x.getMetaDataOfWatchPage)(P),title:C.title,freemiumDelayed:!!(A.freemium&&b&&g)||C.freemium&&g,actors:C.actors,directors:C.directors&&C.directors.length>0?C.directors.join(", "):"",year:C.year,adult:(0,x.isAdult)(M),isSubscribedContent:(0,x.isContentSubscribed)(C),siMatchId:C.siMatchId,parentalRating:M,crisp:C.crisp,parentalRatingName:C.parentalRatingName,secondaryTitle:C.secondaryTitle||"",detail:C.detail||"",langObjs:C.langObjs||[],languageSelector:C.languageSelector||1,clipType:o,monetisable:C.monetisable,tournamentId:C.tournamentId,studioName:C.studioName,studioId:C.studioId,labels:C.labels}).meta=(0,c.default)({},a.setMetaForAsset(C),A.meta),C.episodeNo&&(A.episodeNo=C.episodeNo?C.episodeNo:0,A.episode="Episode "+A.episodeNo),A.image=a.extractImageData(C),A.imageAttributes=C.imageAttributes||null,D=(0,x.getLabelsForMetaData)(A),W=D.primaryTitle,V=D.secondaryTitle,A.primaryTitle=W,A.secondaryTitle=V),("SPORT"===I||I.indexOf("LIVE")>-1||"SPORT"===w||w.indexOf("LIVE")>-1)&&(A.episode=null),G={},j="TRAILER"===I,(0,i.default)(h).length>0&&(G=(0,x.getAdMetaData)(h,C,j,T,m)),H=A.lang,Y=A.genre,q=P&&P.trays,F=R.matchMultiLangOptions,B=[],(void 0===F?[]:F).forEach(function(e){B.push({contentTitle:e.title,contentId:e.contentId,type:e.contentType,language:e.lang[0]})}),A.multiLanguageInfo=B,t.snpRatings&&t.snpRatings.some(function(e){if(""+e.contentID==""+(A.contentId||""))return r=e,!0}),U.isEmptyObject(r)&&A.adult&&A.detail&&(r={contentID:t.id,showSlate:"TRUE",parentalText:A.detail,parentalRating:"18+"}),e.abrupt("return",{contentSnpRating:r||{},pageType:t.pageType,content:A,adMetadata:G,success:_,message:E,type:w,lang:H,genre:Y,config:d,trays:q,source:N.apiSource.CMS,contentStartPointSeconds:n,clipType:o});case 36:return e.prev=36,e.t0=e.catch(0),console.log("printing error in getContentDetailsResponse",e.t0),e.abrupt("return",{});case 40:case"end":return e.stop()}},e,s,[[0,36]])}));return function(t){return e.apply(this,arguments)}}(),a.getTrayResponse=function(e){return e?a.shouldSetMetaDetails(e)?a.addMetaDataInItems(e):e:{}},a.getSeasonsDataResponse=function(e){var t=e.config,r=void 0===t?{}:t,n=e.results,u=void 0===n?{}:n,s=u.item||{},i=a.addMetaDataInItems(u);return i.title="Season "+s.displaySeasonNo,i.source=N.apiSource.CMS,i.config=r,i},a.getTournamentDataResponse=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.results;return a.addMetaDataInItems(void 0===t?{}:t)},a.getHomePageDataResponse=function(e){var t=e.body,r=void 0===t?{}:t,n=r.results,u=void 0===n?{}:n,s=(0,c.default)({},e);return(0,C.default)(r)||(s.body.results=a.addMetaDataInItems(u)),delete s.config,s},a.getLoadMoreContentResponse=function(e){return a.isSuccessResponse(e)&&(e.body.results.items=e.body.results.items.map(a.addMetaProperties)),e},a.getMastheadResponse=function(e){var t=e.assets,r=void 0===t?{}:t,a=r.items;return(void 0===a?[]:a).forEach(function(e){var t=e.line1,r=void 0===t?"":t,a=e.line2,n=void 0===a?"":a,u=e.line3,s=void 0===u?"":u,i=(r||"").split("|");e.line1=i[0]||r,e.line2=i[1]||n,e.line3=i[2]||s}),e},a.getVideoUrlResponse=function(e){if(e.success||e.errorDetails)return e;var t=e.error,r={},a=t.body,n=t.httpStatus,u=void 0,s=a&&a.message||t.message||"";return s=s.toLowerCase(),u=s.includes("platform is missing")?D.default.GET_VIDEOURL_RESPONSE_MISSING_PLATFORM.code:s.includes("drm")?D.default.GET_VIDEOURL_RESPONSE_INVALID_DRM_TAG.code:s.includes("country code")?D.default.GET_VIDEOURL_RESPONSE_INVALID_COUNTRY_CODE.code:s.includes("not found")?D.default.GET_VIDEOURL_RESPONSE_CONTENT_NOT_FOUND.code:s.includes("hooq")?D.default.GET_VIDEOURL_RESPONSE_HOOQ_API_ERROR.code:D.default.GET_VIDEOURL_RESPONSE_UNKNOWN_SERVER_ERROR.code,r={code:u,message:s,httpStatus:n},(0,c.default)({},e,{errorDetails:r})},n=r,(0,I.default)(a,n)}return(0,b.default)(t,e),(0,E.default)(t,[{key:"getDetailRequest",value:function(e){return e}},{key:"getWatchPageDataResponse",value:function(e){var t=U.getNewObjectCopy(S.baseWatchPageModel);return t.contentDetail=e.contentDetails,t.trays.items=e.trays,t.originalReq=e.originalReq,t}},{key:"getDetailPageDataResponse",value:function(e){var t=U.getNewObjectCopy(S.baseWatchPageModel);return t.contentDetail=e.contentDetails||{},t.contentDetail.pageType="DETAIL_PAGE",t.trays.items=e.trays,t.source=N.apiSource.CMS,t.originalReq=e.originalReq,t}},{key:"fetchGravityTrayResponse",value:function(e){var t={};return e.assets&&e.assets.items&&e.assets.items.length&&(t=e.assets),t}},{key:"shouldSetMetaDetails",value:function(e){var t=e.traySource,r=void 0===t?"catalog":t,a=r.toLowerCase();return-1!==N.trayWithoutMeta.indexOf(a)}},{key:"getVideoUrlV2ErrorResponse",value:function(e){var t={};if(!e.success){var r="",a=e.error,n=a.body,u=void 0===n?null:n,s=a.httpStatus;r=(r=u&&u.message||a.message||"").toLowerCase(),t={code:void 0,message:r,httpStatus:s}}return(0,c.default)({},e,{errorDetails:t})}}],[{key:"getVideoUrlV2Response",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e||(e={});var t={success:e.success||!1,isMatch:e.isMatch||!1,watchPercentage:e.watchPercentage||0,originalReq:e.originalReq||{},drmClass:e.drmClass||"",additionalInfo:e.additionalInfo},r=[];return(e.playbackSets||[]).forEach(function(e){var t={};(e.tagsCombination||"").split(";").forEach(function(e){var r=e.split(":");t[r[0]]=r[1]});var a=t.encryption&&"plain"!==t.encryption,n={src:e.playbackUrl||""},u=e.subtitles||[],s="";u.some(function(e){if((e.url||"").indexOf(".vtt")>-1)return s=e.url,!0}),r.push((0,c.default)({tagsObj:t,isDrmProtected:a},{cdnResp:n,drmResp:{licenseUri:e.licenceUrl||"",certificateUrl:e.certificate||"",vtt_url:s},textTracks:u,preRollUrl:e.prerollUrl||"",playbackCDNType:e.playbackCDNType||""}))}),(0,l.default)(t,{playbackSets:r}),t}}]),t}(R.default)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.commonOperations=void 0;var n=r(7),u=a(n),s=r(6),i=a(s),o=r(8),c=a(o),d=r(1),l=a(d),f=r(2),p=a(f),h=r(0),v=r(19),g=function(){function e(){(0,l.default)(this,e)}return(0,p.default)(e,[{key:"getTray",value:function(){var e=(0,c.default)(u.default.mark(function e(t){var r,a,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},t=this.validateTrayRequest(t),e.prev=2,a=t.trayType.toLowerCase().replace(/_/g," "),!t.fetchTrays){e.next=11;break}return n="get"+this.toCamelCase(a),e.next=8,(0,h.handleOperation)(n,t,s);case 8:r=e.sent,e.next=12;break;case 11:r=v.defaultTrayResponse;case 12:return e.abrupt("return",r);case 15:return e.prev=15,e.t0=e.catch(2),e.abrupt("return",i.default.resolve(v.defaultTrayResponse));case 18:case"end":return e.stop()}},e,this,[[2,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"identifyTrays",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{var r=e.type.toLowerCase().replace(/_/g," "),a="get"+this.toCamelCase(r);return(0,h.handleOperation)(a,e,t)}catch(e){return i.default.resolve(v.defaultIdentifyTrayResponse)}}},{key:"toCamelCase",value:function(e){return e.toLowerCase().replace(/(?:(^.)|(\s+.))/g,function(e){return e.charAt(e.length-1).toUpperCase()})}},{key:"validateTrayRequest",value:function(e){var t="",r=!0;e.hasMoreData=!0;try{e.config||(r=!1,console.warn("Please pass app config data")),e.trayType||(r=!1,console.warn("Please pass app config data")),t=e.trayType||"",0>v.skipTrayCall.contentTypes.indexOf(t)||(r=!1),e.trayType=t||e.trayType,e.fetchTrays=r}catch(e){}return e}}]),e}();t.commonOperations=new g,t.default=new g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(17),n=function(e){return e&&e.__esModule?e:{default:e}}(a),u={success:!1,httpStatus:-1,errorDetails:{}};t.default=function(e,t){if(function(e){for(var t in u)if(!Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(e))return e;var r=(0,n.default)({},u,{originalReq:t,errorDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.code=e.code||e.errorCode||e.appCode,e}(e),httpStatus:e.httpStatus||-1});return t&&(r.originalReq=t),r}},function(e,t,r){var a=r(20);e.exports=function(e,t){if(!a(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(22),u=a(n),s=r(3),i=a(s),o=r(1),c=a(o),d=r(2),l=a(d),f=r(4),p=a(f),h=r(5),v=a(h),g=r(0),y=a(g),_=r(32),E=a(_),m=y.default.constants,I=y.default.config;t.default=function(e){function t(){var e;(0,c.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return r.authKeys=(e={},(0,u.default)(e,m.PROD_ENV,"a0aa8bcf9dd58ec6e3b57d9b4e5a0080b1450df7436cfa22dd5cffdfea8e1252"),(0,u.default)(e,m.STAG_ENV,"a0aa8bcf9dd58ec6e3b57d9b4e5a0080b1450df7436cfa22dd5cffdfea8e1252"),(0,u.default)(e,m.QA_ENV,"a0aa8bcf9dd58ec6e3b57d9b4e5a0080b1450df7436cfa22dd5cffdfea8e1252"),(0,u.default)(e,m.PP_ENV,"a0aa8bcf9dd58ec6e3b57d9b4e5a0080b1450df7436cfa22dd5cffdfea8e1252"),(0,u.default)(e,m.LOAD_ENV,"a0aa8bcf9dd58ec6e3b57d9b4e5a0080b1450df7436cfa22dd5cffdfea8e1252"),e),r}return(0,v.default)(t,e),(0,l.default)(t,[{key:"isRegionalPopularityEnabled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.REGIONAL_POPULARITY_ENABLED||["IN"];return e=(e||"").toUpperCase(),r.indexOf(e)>=0}},{key:"_getRequestHeaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=I.initConfig.getConfig()||{},a=r.tenant,n=r.channel,u=e.userToken,s={"x-country-code":(a||"IN").toUpperCase(),"x-platform-code":n,"x-client-code":"LR",hotstarauth:this.getAuthToken(),"X-HS-UserToken":u};return t&&this.isRegionalPopularityEnabled(a,e)&&(s["x-region-code"]=e.region),s}}]),t}(E.default)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),u=a(n),s=r(1),i=a(s),o=r(4),c=a(o),d=r(5),l=a(d),f=r(268),p=a(f),h=r(16),v=a(h);t.default=new(function(e){function t(){(0,i.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.apiConfigs=p.default,e}return(0,l.default)(t,e),t}(v.default))},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(18),u=a(n),s=r(1),i=a(s),o=r(2),c=a(o),d=r(0),l=a(d);t.default=new(function(){function e(){(0,i.default)(this,e)}return(0,c.default)(e,[{key:"hasContentDetails",value:function(e,t){try{var r=e.data.items||[],a=r[0];return!(!a||!t[a])}catch(e){return!1}}},{key:"getPathFromMacrosHash",value:function(e,t){var r=e;return(0,u.default)(t).forEach(function(e){r=r.replace(RegExp("{"+e+"}","g"),t[e])}),r=r.replace(/{.*?}/g,"null")}},{key:"getFormattedLpvHeader",value:function(e){if(!e)return"";var t=window.localStorage,r=[],a=l.default.constants,n=a.RUC_MASTER_KEY,u=a.LPV_KEY;return((((JSON.parse(t.getItem(n))||{})[u]||{})[e]||{}).lpv||[]).forEach(function(e){var t=e.code.toLowerCase()+"="+e.score.toFixed(3);r.push(t)}),r.join(",")}},{key:"getLpvAndSubsStatusObj",value:function(e,t){var r=t.subsStatusHeader,a=void 0===r?"Free":r,n={"x-subscription-type":a},u=this.getFormattedLpvHeader(e);return u&&(n["x-lpv"]=u),n}}]),e}())},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WL_OPERATIONS={READ:"READ",ADD:"ADD",DELETE:"DELETE"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SLATE_ACTION_TYPE=t.ENTITLEMENT_V1_ERROR_TYPE=t.REFRESH_TOKEN_ERROR_TYPE=t.PLAYBACK_COMPOSITE_ERROR_TYPE=void 0;var n=r(1),u=a(n),s=r(2),i=a(s);r(219),r(240),r(273),r(274),r(278),r(285),r(292);var o=r(0),c=r(113),d=a(c),l=r(19);t.default=new(function(){function e(){(0,u.default)(this,e)}return(0,i.default)(e,[{key:"getContentDetails",value:function(){return(0,o.handleOperation)("getContentDetails",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getTray",value:function(){return(0,o.handleOperation)("getTray",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"identifyTrays",value:function(e,t){return d.default.identifyTrays(e,t)}},{key:"getTrays",value:function(){return(0,o.handleOperation)("getTrays",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getWatchPageData",value:function(){return(0,o.handleOperation)("getWatchPageData",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getDetailPageData",value:function(){return(0,o.handleOperation)("getDetailPageData",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"canDoPayment",value:function(){return(0,o.handleOperation)("canDoPayment",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"setRecommendationParams",value:function(){return(0,o.handleOperation)("setRecommendationParams",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getYMALTrays",value:function(){return(0,o.handleOperation)("getYMALTrays",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"fireCardClick",value:function(){return(0,o.handleOperation)("fireCardClick",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"fireWatchedEvent",value:function(){return(0,o.handleOperation)("fireWatchedEvent",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"fireContentViewEvent",value:function(){return(0,o.handleOperation)("fireContentViewEvent",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getSeasonsData",value:function(e,t){return(0,o.handleOperation)("getSeasonsData",e,t)}},{key:"getWatchlist",value:function(e,t){return(0,o.handleOperation)("getWatchlist",e,t)}},{key:"addToWatchlist",value:function(e,t){return(0,o.handleOperation)("addToWatchlist",e,t)}},{key:"removeFromWatchlist",value:function(e,t){return(0,o.handleOperation)("removeFromWatchlist",e,t)}},{key:"getCDN",value:function(){return(0,o.handleOperation)("getCDN",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getWatchNext",value:function(){return(0,o.handleOperation)("getWatchNext",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"isAllowPlayback",value:function(){return(0,o.handleOperation)("isAllowPlayback",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"checkConcurrency",value:function(){return(0,o.handleOperation)("checkConcurrency",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"removeConcurrency",value:function(){return(0,o.handleOperation)("removeConcurrency",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"concurrencyHeartbeat",value:function(){return(0,o.handleOperation)("concurrencyHeartbeat",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"checkAggreGatedContentRights",value:function(){return(0,o.handleOperation)("checkAggreGatedContentRights",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"checkGeoRights",value:function(){return(0,o.handleOperation)("checkGeoRights",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getAllAssets",value:function(){return(0,o.handleOperation)("getAllAssets",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"searchAsset",value:function(){return(0,o.handleOperation)("searchAsset",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getVideoUrl",value:function(){return(0,o.handleOperation)("getVideoUrl",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getVideoUrlV2",value:function(){return(0,o.handleOperation)("getVideoUrlV2",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getCompositePlaybackUrl",value:function(){return(0,o.handleOperation)("getCompositePlaybackUrl",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"verifyAndReturnPlaybackUrl",value:function(){return(0,o.handleOperation)("verifyAndReturnPlaybackUrl",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"rucSetItem",value:function(){return(0,o.handleOperation)("rucSetItem",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"rucSetModule",value:function(){return(0,o.handleOperation)("rucSetModule",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"rucGetItem",value:function(){return(0,o.handleOperation)("rucGetItem",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"rucRemoveItem",value:function(){return(0,o.handleOperation)("rucRemoveItem",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"updateCWTrayItem",value:function(){return(0,o.handleOperation)("updateCWTrayItem",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"cleanLocalCWData",value:function(){return(0,o.handleOperation)("cleanLocalCWData",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"loadMoreAssets",value:function(){return(0,o.handleOperation)("loadMoreAssets",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"checkIfContentWatched",value:function(){return(0,o.handleOperation)("checkIfContentWatched",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"setContentWatched",value:function(){return(0,o.handleOperation)("setContentWatched",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getContentWatched",value:function(){return(0,o.handleOperation)("getContentWatched",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getTournamentData",value:function(){return(0,o.handleOperation)("getTournamentData",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"loadMoreSports",value:function(){return(0,o.handleOperation)("loadMoreSports",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"loadMoreTournaments",value:function(){return(0,o.handleOperation)("loadMoreTournaments",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getTrayFromId",value:function(){return(0,o.handleOperation)("getTrayFromId",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getHomePageData",value:function(){return(0,o.handleOperation)("getHomePageData",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getMasthead",value:function(){return(0,o.handleOperation)("getMasthead",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])}},{key:"getMultiContentDetails",value:function(e,t){return(0,o.handleOperation)("getMultiContentDetails",e,t)}},{key:"fetchCWTray",value:function(e,t){return(0,o.handleOperation)("fetchCWTray",e,t)}},{key:"fetchCWTrayWithLocalBackup",value:function(e,t){return(0,o.handleOperation)("fetchCWTrayWithLocalBackup",e,t)}},{key:"removeCWItem",value:function(e,t){return(0,o.handleOperation)("removeCWItem",e,t)}},{key:"getContinueWatchingTray",value:function(e,t){return(0,o.handleOperation)("getContinueWatchingTray",e,t)}},{key:"fetchLpv",value:function(e,t){return(0,o.handleOperation)("fetchLpv",e,t)}},{key:"postLpv",value:function(e,t){return(0,o.handleOperation)("postLpv",e,t)}},{key:"setWatchlistCache",value:function(e,t){return(0,o.handleOperation)("setWatchlistCache",e,t)}}]),e}()),t.PLAYBACK_COMPOSITE_ERROR_TYPE=l.PLAYBACK_COMPOSITE_ERROR_TYPE,t.REFRESH_TOKEN_ERROR_TYPE=l.REFRESH_TOKEN_ERROR_TYPE,t.ENTITLEMENT_V1_ERROR_TYPE=l.ENTITLEMENT_V1_ERROR_TYPE,t.SLATE_ACTION_TYPE=l.SLATE_ACTION_TYPE},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,a,n){var u={};return Object.keys(a).forEach(function(e){u[e]=a[e]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},u),n&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(n):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(e,t,u),u=null),u}Object.defineProperty(t,"__esModule",{value:!0});var u,s,i,o,c=r(12),d=a(c),l=r(50),f=a(l),p=r(11),h=a(p),v=r(9),g=a(v),y=r(18),_=a(y),E=r(7),m=a(E),I=r(6),T=a(I),b=r(8),k=a(b),R=r(1),P=a(R),C=r(2),A=a(C),O=r(0),S=a(O),w=r(84),x=a(w),N=r(58),M=a(N),D=r(59),L=a(D),U=r(220),W=a(U),V=r(226),G=a(V),j=r(33),H=a(j),Y=r(85),q=a(Y),F=S.default.config,B=new G.default,K=new H.default;t.default=(0,O.registerOperations)("GRAVITY",(u=(0,O.responseAdapter)(B.getWatchlistTrayResponse),s=(0,O.responseAdapter)(B.getWatchNextResponse),i=(0,O.responseAdapter)(B.getTrayResponse),o=function(){function e(){(0,P.default)(this,e),this._recoParams={}}return(0,A.default)(e,[{key:"isP13NEnabled",value:function(){return(F.initConfig.getConfig()||{}).isP13NEnabled}},{key:"usePersonaWatchlist",value:function(){var e=F.initConfig.getConfig();return!!e&&!!e.usePersonaWatchList}},{key:"_shouldRecoParamsUpdate",value:function(e){var t=e.userId,r=e.cookieId,a=e.pId,n=e.profile,u=this._recoParams.profile||"";return t!==this._recoParams.userId||r!==this._recoParams.cookieId||a!==this._recoParams.pId||n!==u}},{key:"setRecommendationParams",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r,a=t.type,n=void 0===a?x.default.EVENT_TYPE.SET:a,u=t.useJsGeneratedCookie,s=void 0===u?x.default.USE_JS_GEN_COOKIE:u,i=t.cookieName,o=void 0===i?x.default.DEF_COOKIE_NAME:i,c=t.userId,d=void 0===c?"":c,l=t.cookieId,f=void 0===l?"":l,p=t.pId,h=void 0===p?"":p,v=t.userStatus,g=void 0===v?"":v,y=t.Location,_=void 0===y?"":y,E=t.device,I=void 0===E?"":E,b=t.profile;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={success:!1},this.isP13NEnabled()){e.next=3;break}return e.abrupt("return",r);case 3:if(e.prev=3,!this._shouldRecoParamsUpdate({userId:d,cookieId:f,pId:h,profile:b})){e.next=11;break}return this.usePersonaWatchlist()||L.default.resetWatchlist(),this._recoParams={type:n,useJsGeneratedCookie:s,cookieName:o,userId:d,cookieId:f,pId:h,userStatus:g,Location:_,device:I,profile:b},e.next=9,W.default.getService();case 9:e.sent.push(this._recoParams);case 11:r.success=!0,e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",T.default.reject(r));case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}},e,this,[[3,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getWatchlist",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f,p,v,y,E,I,b,k,R;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.language,a=void 0===r?"WATCHLIST_TRAY":r,n=t.orderId,u=void 0===n?q.default.WATCH_LIST:n,s=t.config,i=void 0===s?{}:s,o=t.userId,c={},d={language:a,orderId:u},this.isP13NEnabled()){e.next=5;break}return e.abrupt("return",c);case 5:if(e.prev=5,l=L.default.getTray(t),!(0,_.default)(l).length){e.next=9;break}return e.abrupt("return",(0,g.default)({},l,{cache:!0}));case 9:if(f=M.default.getFilter(d),this._recoParams.userId){e.next=14;break}return console.warn("GRAVITY:: setRecommendationParams should be called first"),e.abrupt("return",T.default.resolve([]));case 14:return e.next=16,W.default.fetchData((0,g.default)({},f));case 16:(c=e.sent).trayInfo=d,p=(c.items||[]).length;case 19:if(p!==x.default.DEFAULT_GRAVITY_FILTER.numberLimit){e.next=29;break}return v=c.items.length,y=(0,g.default)({},f,{offset:v}),e.next=24,W.default.fetchData((0,g.default)({},y));case 24:E=e.sent,p=(E.items||[]).length,c.items=[].concat((0,h.default)(c.items),(0,h.default)(E.items)),e.next=19;break;case 29:return I=c.items,k=(b=void 0===I?[]:I).map(function(e){return{itemId:e.seriesNameId}}).filter(function(e){return!!e.itemId}),b=[].concat((0,h.default)(b),(0,h.default)(k)),e.next=34,this.getContentDetailsForItems({items:b,config:i});case 34:R=e.sent,c=(0,g.default)({},c,{config:i,contentDetailsMap:R,userId:o}),e.next=42;break;case 38:return e.prev=38,e.t0=e.catch(5),console.warn("Unable to fetch Watchlist::",e.t0),e.abrupt("return",T.default.reject(Error("Unable to Fetch Results")));case 42:return e.abrupt("return",c);case 43:case"end":return e.stop()}},e,this,[[5,38]])}));return function(t){return e.apply(this,arguments)}}()},{key:"addToWatchlist",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r,a,n,u,s,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.userId,r=(0,f.default)(t,["userId"]),a={},this.isP13NEnabled()){e.next=4;break}return e.abrupt("return",a);case 4:return e.prev=4,e.next=7,W.default.getService();case 7:if(n=e.sent,u=r.contentId,s=void 0===u?"":u,L.default.addToWatchlist(t)){e.next=11;break}return e.abrupt("return",T.default.reject(Error("Content Already Added")));case 11:i={mode:M.default.getGravityMode(),itemId:""+s,type:x.default.EVENT_TYPE.EVENT,eventType:"ADD_TO_PLAYLIST"},n.push(i),e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(4),console.warn("Gravity:: Unable to add to playlist",e.t0),e.abrupt("return",T.default.reject(e.t0));case 19:return e.abrupt("return",a);case 20:case"end":return e.stop()}},e,this,[[4,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"removeFromWatchlist",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r,a,n,u;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},this.isP13NEnabled()){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,W.default.getService();case 6:a=e.sent,n=t.contentId,L.default.removeFromWatchlist(t),u={mode:M.default.getGravityMode(),itemId:n,type:x.default.EVENT_TYPE.EVENT,eventType:"REMOVE_FROM_PLAYLIST"},a.push(u),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",T.default.reject(Error("Unable to remove from watchlist")));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}},e,this,[[3,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getWatchNext",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r,a,n,u,s,i,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},this.isP13NEnabled()){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,a=t.gender,n=t.contentId,u=t.numberLimit,s=void 0===u?1:u,i={type:x.default.EVENT_TYPE.RECO,numberLimit:s,scenarioId:"CONTINUOUS_PLAY",currentItemId:n,gender:a,resultNames:["itemId","title","subType","subgenre","episodeTitle","languageDescription"]},e.next=8,W.default.fetchData(i);case 8:return r=e.sent,e.next=11,this.getContentDetailsForItems(r);case 11:r.contentDetailsMap=e.sent,e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(3),o="Unable get the watch next video",console.log(o,e.t0),e.abrupt("return",T.default.reject(Error(o)));case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e,this,[[3,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getContentDetailsForItems",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r,a,n,u=t.items,s=void 0===u?[]:u,i=t.config;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},this.isP13NEnabled()){e.next=3;break}return e.abrupt("return",r);case 3:if(s.length){e.next=5;break}return e.abrupt("return",r);case 5:return e.prev=5,a=s.map(function(e){return e.itemId}),n={contentIds:a,config:i},e.next=10,K.getMultiGetContent(n);case 10:r=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.error("Error while fetching data from multiget");case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}},e,this,[[5,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getYmalTrays",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r,a,n,u,s,i,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},this.isP13NEnabled()){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,a=M.default.getFilter(t),e.next=7,W.default.fetchData((0,g.default)({},a),{},t);case 7:if((r=e.sent).config=t.config,r.trayInfo=t,r.filter=a,r.userId=t.userId,n=a.scenarioId,u={},!r.items||!r.items.length){e.next=21;break}return this.fireRecoEvent({scenarioId:n,eventType:"SHOW_RECOMMENDATION"}),s=r.items,i=void 0===s?[]:s,t.orderId!==q.default.CONTINUE_WATCHING&&t.orderId!==q.default.WATCH_LIST||(o=i.map(function(e){return{itemId:e.seriesNameId}}).filter(function(e){return!!e.itemId}),i=[].concat((0,h.default)(i),(0,h.default)(o))),e.next=20,this.getContentDetailsForItems({items:i,config:t.config});case 20:u=e.sent;case 21:r.contentDetailsMap=u,e.next=28;break;case 24:return e.prev=24,e.t0=e.catch(3),console.log("gravity getYmalTrays error",e.t0),e.abrupt("return",T.default.reject(Error("Unable to Fetch Results")));case 28:return e.abrupt("return",r);case 29:case"end":return e.stop()}},e,this,[[3,24]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fireCardClick",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r,a=t.contentId,n=t.trayOrderId;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},this.isP13NEnabled()){e.next=3;break}return e.abrupt("return",r);case 3:if(e.prev=3,M.default.shouldTrackRecClick(n)){e.next=7;break}return e.abrupt("return",T.default.resolve({}));case 7:return e.next=9,this.userEventTracking({contentId:a,eventType:"REC_CLICK"});case 9:r=e.sent,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",T.default.reject(e.t0));case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this,[[3,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fireDetailsPageView",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r,a=t.contentId;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},this.isP13NEnabled()){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,this.userEventTracking({contentId:a,eventType:"VIEW"});case 6:r=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",T.default.reject(e.t0));case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fireContentViewEvent",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r,a=t.contentId,n=void 0===a?"":a,u=t.premium,s=void 0!==u&&u;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},this.isP13NEnabled()){e.next=3;break}return e.abrupt("return",r);case 3:if(e.prev=3,!s){e.next=10;break}return e.next=7,this.firePremiumContentView(n);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,this.fireFreeContentView(n);case 12:e.t0=e.sent;case 13:r=e.t0,e.next=20;break;case 16:return e.prev=16,e.t1=e.catch(3),console.warn("Gravity::","fireContentViewEvent::",e.t1),e.abrupt("return",T.default.reject(e.t1));case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}},e,this,[[3,16]])}));return function(t){return e.apply(this,arguments)}}()},{key:"firePremiumContentView",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},this.isP13NEnabled()){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,this.userEventTracking({contentId:t,eventType:"SUBSCRIPTION_VIEW"});case 6:r=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",T.default.reject(e.t0));case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fireWatchedEvent",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r,a,n,u,s,i=t.contentId,o=void 0===i?"":i,c=t.watchTime,d=t.videoPosition,l=void 0===d?0:d,f=t.totalDuration,p=void 0===f?0:f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},this.isP13NEnabled()){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,console.warn("Gravity::","fireWatchedEvent request::",{contentId:o,totalDuration:p,watchTime:c,videoPosition:l}),e.next=7,W.default.getService();case 7:a=e.sent,n=p?Math.round(c/p*100):0,u=this._recoParams.Location,s={itemId:""+o,video_position:Math.round(l/p*100),mode:M.default.getGravityMode(),type:x.default.EVENT_TYPE.EVENT,eventType:"WATCH_LIVE",time:Math.round((new Date).getTime()/1e3),percentage:Math.min(Math.round(n),100),watchedDuration:c,userlocation:u},a.push(s),r.success=!0,e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(3),console.warn("Gravity::","fireWatchedEvent::",e.t0),e.abrupt("return",T.default.reject(e.t0));case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e,this,[[3,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fireFreeContentView",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},this.isP13NEnabled()){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,this.userEventTracking({contentId:t,eventType:"FREE_VIEW"});case 6:r=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",T.default.reject(e.t0));case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"userEventTracking",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r,a,n,u,s,i,o=t.contentId,c=void 0===o?"":o,d=t.eventType,l=void 0===d?"":d,f=t.percentage,p=void 0===f?"":f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},this.isP13NEnabled()){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,W.default.getService();case 6:a=e.sent,n=this._recoParams.Location,u=M.default.getGravityMode(),s=Math.round((new Date).getTime()/1e3),i={type:x.default.EVENT_TYPE.EVENT,userlocation:n,mode:u,eventType:l,time:s,itemId:""+c},p&&(i.percentage=p),a.push(i),r.success=!0,e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(3),console.warn("Unable to push event:: Gravity::",e.t0),e.abrupt("return",T.default.reject(Error("Unable to Push Event")));case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}},e,this,[[3,16]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fireRecoEvent",value:function(){var e=(0,k.default)(m.default.mark(function e(t){var r,a,n,u,s,i,o=t.scenarioId,c=void 0===o?"":o,d=t.eventType,l=void 0===d?"":d,f=t.splitgroup,p=void 0===f?"gravity":f,h=t.recommendationId,v=t.contentId;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},this.isP13NEnabled()){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,W.default.getService();case 6:if(a=e.sent,c&&l){e.next=9;break}return e.abrupt("return",T.default.reject(Error('Parameters "scenarioId or "eventType not sent"')));case 9:n=M.default.getGravityMode(),u=x.default.EVENT_TYPE.EVENT,s=Math.round((new Date).getTime()/1e3),i={mode:n,time:s,type:u,eventType:l,scenarioId:c,splitgroup:p},h&&(i.recommendationId=h),v&&(i.itemId=v),a.push(i),r.success=!0,e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(3),e.abrupt("return",T.default.reject(Error("Unable to push event with scenarioId ::",c)));case 22:return e.abrupt("return",r);case 23:case"end":return e.stop()}},e,this,[[3,19]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),n(o.prototype,"getWatchlist",[u],(0,d.default)(o.prototype,"getWatchlist"),o.prototype),n(o.prototype,"getWatchNext",[s],(0,d.default)(o.prototype,"getWatchNext"),o.prototype),n(o.prototype,"getYmalTrays",[i],(0,d.default)(o.prototype,"getYmalTrays"),o.prototype),o))},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),u=a(n),s=r(6),i=a(s),o=r(60),c=a(o),d=r(7),l=a(d),f=r(8),p=a(f),h=r(1),v=a(h),g=r(2),y=a(g),_=r(222),E=a(_),m=r(225),I=a(m);t.default=new(function(){function e(){(0,v.default)(this,e),this._gravityService=("undefined"!=typeof window?window:{})._gravity||null,this._gravityServicePromise=null,this._responseCache={},this._cacheTimeout=3e5}return(0,y.default)(e,[{key:"getService",value:function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._gravityServicePromise){e.next=3;break}return e.next=3,this._gravityServicePromise;case 3:if(this._gravityService){e.next=8;break}return this._gravityServicePromise=E.default.getService(),e.next=7,this._gravityServicePromise;case 7:this._gravityService=e.sent;case 8:return e.abrupt("return",this._gravityService);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"generateRequestKey",value:function(e){var t="";try{t=(0,c.default)(e)}catch(e){}return t}},{key:"setResponseCache",value:function(e,t){this._responseCache[e]={time:Date.now(),response:t}}},{key:"checkForCachResponse",value:function(e,t){e=e||this.generateRequestKey(t);var r=this._responseCache[e]||{},a=r.response,n=r.time,u=void 0;return a&&(u=Date.now()-n>this._cacheTimeout?void 0:a),u}},{key:"fetchData",value:function(){var e=(0,p.default)(l.default.mark(function e(){var t,r,a,n,s,o,c,d,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=this,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cache:!1},v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getService();case 3:if(t=e.sent,r=h.cache,n="",!(a=void 0!==r&&r)){e.next=11;break}if(n=this.generateRequestKey(f),!(s=this.checkForCachResponse(n,f))){e.next=11;break}return e.abrupt("return",i.default.resolve(s));case 11:if(!this.shouldMakeApiCallViaGravityApiRatherThanSDK(v,f.scenarioId)){e.next=18;break}return e.next=14,I.default.fetchGravityTrayData(v);case 14:return o=e.sent,e.abrupt("return",o);case 18:return c=new i.default(function(e,r){t.push((0,u.default)({},f,{callback:function(t){t?e((0,u.default)({},t,{apiTimeout:!1})):r(Error("Unable to Fetch Results"))}}))}),d=new i.default(function(e,t){setTimeout(function(){e({apiTimeout:!0})},3e3)}),e.abrupt("return",i.default.race([d,c]).then(function(e){return a&&!e.apiTimeout&&p.setResponseCache(n,e),e}));case 21:e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(0),console.log("fetchData exception : ",e.t0),e.abrupt("return",i.default.reject(e.t0));case 27:case"end":return e.stop()}},e,this,[[0,23]])}));return function(){return e.apply(this,arguments)}}()},{key:"shouldMakeApiCallViaGravityApiRatherThanSDK",value:function(e,t){var r=e.config,a=(r=void 0===r?{}:r).GRAVITY_SCENARIOS_IDS;return!!a&&(a.PREFIXED_SCENARIOS_IDS.some(function(e){return t.startsWith(e)})||a.EXACT_SCENARIOS_IDS.some(function(e){return t===e}))}}]),e}())},function(e,t,r){var a=r(10),n=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),u=a(n),s=r(6),i=a(s),o=r(8),c=a(o),d=function(){var e=(0,c.default)(u.default.mark(function e(t,r){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=E.map(function(e){return new e(t,r).inject()}),e.next=3,i.default.all(a);case 3:return e.abrupt("return",window._gravity);case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=(0,c.default)(u.default.mark(function e(){var t,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window._gravity){e.next=4;break}return t=_.initConfig.getConfig(),r=t.env,a=t.country,e.next=4,d(r,a);case 4:return e.abrupt("return",i.default.resolve(window._gravity));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),f=r(223),p=a(f),h=r(224),v=a(h),g=r(0),y=a(g),_=y.default.config,E=[p.default,v.default];t.default={getService:l}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),u=a(n),s=r(1),i=a(s),o=r(2),c=a(o),d=r(4),l=a(d),f=r(5),p=a(f),h=r(0),v=r(86),g=h.scriptLoader.Injector;t.default=function(e){function t(e,r){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return a.env=e,a.country=r,a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"init",value:function(){this._injectorUrl=(0,v.getJsServlet)(this.env,this.country),this._analyticsId="gravityJsServlet"}}]),t}(g)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),u=a(n),s=r(1),i=a(s),o=r(2),c=a(o),d=r(4),l=a(d),f=r(5),p=a(f),h=r(0),v=r(86),g=h.scriptLoader.Injector;t.default=function(e){function t(e,r){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return a.env=e,a.country=r,a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"init",value:function(){this._injectorUrl=(0,v.getRecoJsUrl)(this.env,this.country),this._analyticsId="gravityRecoJs"}}]),t}(g)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),u=a(n),s=r(8),i=a(s),o=r(1),c=a(o),d=r(2),l=a(d),f=r(0),p=a(f),h=r(86),v=r(58),g=a(v),y=f.utils.baseUtils,_=p.default.config;t.default=new(function(){function e(){(0,c.default)(this,e)}return(0,l.default)(e,[{key:"getRequestHeaders",value:function(){return{Authorization:"Basic aG90c3Rhcjo3S1lWVkZRS01w","Content-Type":"application/json"}}},{key:"fetchGravityTrayData",value:function(){var e=(0,i.default)(u.default.mark(function e(t){var r,a,n,s,i,o,c,d,l,p,v,E,m,I,T;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=_.initConfig.getConfig(),a=r.env,n=r.country,s=(0,h.getGravityUrlPath)(a,n),i=t.subsStatusHeader,o=t.scenarioId,c=t.userId,d=t.context,l=t.offset,p=void 0===l?0:l,v=i.toLowerCase().includes("premium")?"premium":"nonpremium",E=g.default.getTopThreeLangsFromLpv(c),m={userStatus:v,scenarioId:o,numberLimit:20,location:n.toUpperCase(),pId:c,platform:"web",resultNameValue:"itemId",offset:p},d&&(m.isContext=d),E&&(m.languages=E),I=s+y.createQueryParam({endpoint:s,data:m}),T={headers:this.getRequestHeaders()},e.next=13,f.HttpLib.get(I,T);case 13:return e.abrupt("return",e.sent);case 16:throw e.prev=16,e.t0=e.catch(0),Error("Unable to fetch gravity trays as API returns status as False.");case 19:case"end":return e.stop()}},e,this,[[0,16]])}));return function(t){return e.apply(this,arguments)}}()}]),e}())},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),u=a(n),s=r(1),i=a(s),o=r(2),c=a(o),d=r(227),l=a(d),f=r(59),p=a(f),h=r(19),v=r(110),g=a(v);t.default=function(){function e(){var t=this;(0,i.default)(this,e),this.getWatchlistTrayResponse=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e;return e.cache||(r=t.getTrayResponse(e),p.default.setWatchlist(r)),r},this.getWatchNextResponse=function(e){var t=e.outputNameValues,r=void 0===t?[]:t,a=e.items,n=void 0===a?[]:a,s=e.contentDetailsMap,i=n[0]||{},o=(s.results||{}).map||{},c=new g.default(i,{},{},o);return(0,u.default)({},c,{outputNameValues:r,source:h.apiSource.GRAVITY})}}return(0,c.default)(e,[{key:"getTrayResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trayInfo,r=void 0===t?{}:t,a=e.config,n=e.contentDetailsMap,s=void 0===n?{}:n,i=e.userId,o=new l.default(r,e,a,s);return(0,u.default)({},o,{userId:i,success:!0,status:!0})}}]),e}()},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(){return function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).every(function(e){return E.default.isMovieType(e)})}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])?"hs":"vl"}Object.defineProperty(t,"__esModule",{value:!0});var u=r(17),s=a(u),i=r(60),o=a(i),c=r(50),d=a(c),l=r(1),f=a(l),p=r(51),h=r(84),v=a(h),g=r(110),y=a(g),_=r(58),E=a(_);t.default=function e(t,r){var a=r.items,u=void 0===a?[]:a,i=r.filter,c=void 0===i?{}:i,l=(0,d.default)(r,["items","filter"]),h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,f.default)(this,e);try{var _=JSON.parse((0,o.default)(p.baseTrayModel)),m=n(u),I=c.scenarioId,T=void 0===I?"":I,b=(g.results||{}).map||{};(0,s.default)(this,_);var k=t.orderId;this.title=t.contentTitle,this.assets.items=u.map(function(e){return new y.default(e,h,{imageType:m,orderId:k},b)}),this.assets.items=this.assets.items.filter(function(e){return!!e.contentId}),this.assets.page=1,this.assets.totalPages=u.length===v.default.DEFAULT_GRAVITY_FILTER.numberLimit?this.assets.page+1:this.assets.page,this.assets.pageSize=v.default.MAX_COUNT_PER_PAGE,this.assets.totalResults=this.assets.items.length||0,this.recomendationDetails={outputNameValues:l.outputNameValues},this.isBYWTray=E.default.isBYWTray(t.orderId),this.cardLogic=T}catch(e){console.error("Error while creating gravity data details ",e)}}},,,,,,,,,,,,,function(e,t,r){"use strict";var a=r(241),n=function(e){return e&&e.__esModule?e:{default:e}}(a);(0,r(0).registerOperations)("CMS",n.default)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,a,n){var u={};return Object.keys(a).forEach(function(e){u[e]=a[e]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},u),n&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(n):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(e,t,u),u=null),u}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,s,i,o,c,d,l,f,p,h,v,g,y,_,E,m,I,T,b,k,R,P,C,A,O,S,w=r(12),x=a(w),N=r(37),M=a(N),D=r(11),L=a(D),U=r(9),W=a(U),V=r(17),G=a(V),j=r(7),H=a(j),Y=r(6),q=a(Y),F=r(8),B=a(F),K=r(1),z=a(K),Q=r(2),J=a(Q),X=r(0),Z=r(112),$=a(Z),ee=r(33),te=a(ee),re=r(79),ae=r(244),ne=a(ae),ue=r(87),se=r(246),ie=r(113),oe=r(19),ce=r(247),de=a(ce),le=r(88),fe=a(le),pe=r(114),he=a(pe),ve=r(89),ge=a(ve),ye=new te.default,_e=new re.HotstarAVSCommonsService,Ee=new ge.default,me=X.utils.baseUtils,Ie=new $.default;t.default=(u=(0,X.requestAdapter)(Ie.getDetailRequest),s=(0,X.responseAdapter)(Ie.getMovieDataResponse),i=(0,X.requestAdapter)(Ie.getDetailRequest),o=(0,X.responseAdapter)(Ie.getEpisodeDataResponse),c=(0,X.requestAdapter)(Ie.getDetailRequest),d=(0,X.responseAdapter)(Ie.getClipDataResponse),l=(0,X.requestAdapter)(Ie.getDetailRequest),f=(0,X.responseAdapter)(Ie.getMatchDataResponse),p=(0,X.responseAdapter)(Ie.getShowDataResponse),h=(0,X.responseAdapter)(Ie.getWatchPageDataResponse),v=(0,X.responseAdapter)(Ie.getDetailPageDataResponse),g=(0,X.responseAdapter)(Ie.getSeasonsDataResponse),y=(0,X.requestAdapter)(Ie.getContentDefaultRequest),_=(0,X.responseAdapter)(Ie.getSearchContentResponse),E=(0,X.responseAdapter)(Ie.getLoadMoreContentResponse),m=(0,X.responseAdapter)(Ie.getTrayResponse),I=(0,X.responseAdapter)(Ie.getHomePageDataResponse),T=(0,X.responseAdapter)(Ie.getMastheadResponse),b=(0,X.responseAdapter)(Ie.getTournamentDataResponse),k=(0,X.responseAdapter)(Ie.getHomePageDataResponse),R=(0,X.responseAdapter)(Ie.getTournamentDataResponse),P=(0,X.requestAdapter)(Ie.getTraysRequest),C=(0,X.responseAdapter)(Ie.getTraysResponse),A=(0,X.responseAdapter)(Ie.getVideoUrlResponse),O=(0,X.responseAdapter)([$.default.getVideoUrlV2Response,$.default.getVideoUrlV2ErrorResponse]),S=function(){function e(){(0,z.default)(this,e),this.apiRegistry=ne.default}return(0,J.default)(e,[{key:"getData",value:function(){var e=(0,B.default)(H.default.mark(function e(t,r){var a,n,u,s;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,n=this.apiRegistry.getPath(t,r),u=ye._getRequestHeaders(t.config),s={headers:u},e.next=7,X.HttpLib.get(n,s);case 7:(a=e.sent).body.statusCode=a.statusCode,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(1),console.log("printing error in promise rejection",e.t0),e.abrupt("return",q.default.reject(e.t0));case 15:return e.abrupt("return",a.body);case 16:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"getVideoSettings",value:function(){var e=(0,B.default)(H.default.mark(function e(t,r){var a,n,u,s,i;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.CUE_POINT_URL,n=r.ADV_SERVER_URL,u=(0,ue.getCuePointUrl)(t,a),e.next=4,q.default.all([_e.getCuePoints(u)]);case 4:return s=e.sent,i={cuepointsMidroll:s[0],vpSpotClickThruMode:1,vphost:n,vptags:"CID_"+t},e.abrupt("return",i);case 7:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"getContentDetails",value:function(){var e=(0,B.default)(H.default.mark(function e(t,r){var a,n,u,s,i,o,c,d,l,f,p,h,v,g,y,_,E,m,I;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[],n=(0,G.default)({},t),u=t.config,s=t.pathVars,i=t.addnlParams,o=void 0===i?{}:i,c=u.SNP_RATINGS,d=void 0===c?"":c,l=s.contentId,f=s.siMatchId,p=s.id,n.querystring=n.querystring||{},f?n.querystring.siMatchId=f:p?n.querystring.id=p:n.querystring.contentId=l,h=o,e.next=11,this.getData(n,r);case 11:if(v=e.sent,!d){e.next=16;break}return e.next=15,_e.getSNPRatings(d);case 15:a=e.sent;case 16:if(g=v.results,l=(y=void 0===g?{}:g).item&&y.item.contentId,t.pathVars.contentId=l,_={},E=y.item&&y.item.live,m=y.item&&y.item.contentStartPointSeconds,I=y.item&&y.item.clipType,!t.watchPage||t.isLive){e.next=27;break}return e.next=26,this.getVideoSettings(l,u);case 26:_=e.sent;case 27:return e.abrupt("return",{snpRatings:a.Rating||[],pageType:t.pageType,config:u,contentDetails:v,reqParams:h,videoPlazaSettings:_,isLiveMatch:E,originalReq:t,contentStartPointSeconds:m,clipType:I});case 30:return e.prev=30,e.t0=e.catch(0),console.log("printing error in getContentDetails",e.t0),e.abrupt("return",q.default.reject(e.t0));case 34:case"end":return e.stop()}},e,this,[[0,30]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMovieData",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.getContentDetails(t,"getMovieDetails");case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),console.log("promise rejected in getWatchPageData",e.t0),e.abrupt("return",q.default.reject(e.t0));case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getEpisodeData",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.getContentDetails(t,"getEpisodeDetails");case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),console.log("promise rejected in getWatchPageData",e.t0),e.abrupt("return",q.default.reject(e.t0));case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getClipData",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.getContentDetails(t,"getNewsClipDetails");case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),console.log("promise rejected in getWatchPageData",e.t0),e.abrupt("return",q.default.reject(e.t0));case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getMatchData",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.getContentDetails(t,"getSportClipDetails");case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),console.log("promise rejected in getWatchPageData",e.t0),e.abrupt("return",q.default.reject(e.t0));case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getShowData",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.getContentDetails(t,"getShowDetails");case 4:r=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.log("promise rejected in getWatchPageData",e.t0),e.abrupt("return",q.default.reject(e.t0));case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getWatchPageData",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={},a={},t.watchPage=!0,n=t.type,u=(0,ue.getContentType)(n),e.prev=5,e.t0=u,e.next="MOVIE"===e.t0?9:"EPISODE"===e.t0?13:"NEWS"===e.t0?17:"SPORT"===e.t0?21:25;break;case 9:return e.next=11,this.getMovieData(t);case 11:return a=e.sent,e.abrupt("break",29);case 13:return e.next=15,this.getEpisodeData(t);case 15:return a=e.sent,e.abrupt("break",29);case 17:return e.next=19,this.getClipData(t);case 19:return a=e.sent,e.abrupt("break",29);case 21:return e.next=23,this.getMatchData(t);case 23:return a=e.sent,e.abrupt("break",29);case 25:return e.next=27,this.getClipData(t);case 27:return a=e.sent,e.abrupt("break",29);case 29:if(a.success){e.next=31;break}return e.abrupt("return",q.default.reject(a));case 31:return r.trays=[],r.contentDetails=a,e.abrupt("return",r);case 36:return e.prev=36,e.t1=e.catch(5),console.log("promise rejected in getWatchPageData",e.t1),e.abrupt("return",q.default.reject(e.t1));case 40:case"end":return e.stop()}},e,this,[[5,36]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getDetailPageData",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={},a={},n=t.type,u=(0,ue.getContentType)(n),e.prev=4,e.t0=u,e.next="MOVIE"===e.t0?8:"SERIES"===e.t0?12:16;break;case 8:return e.next=10,this.getMovieData(t);case 10:return a=e.sent,e.abrupt("break",20);case 12:return e.next=14,this.getShowData(t);case 14:return a=e.sent,e.abrupt("break",20);case 16:return e.next=18,this.getClipData(t);case 18:return a=e.sent,e.abrupt("break",20);case 20:if(a.success){e.next=22;break}return e.abrupt("return",q.default.reject(a));case 22:return r.trays=[],r.contentDetails=a,e.abrupt("return",r);case 27:return e.prev=27,e.t1=e.catch(4),console.log("promise rejected in getdetailPageData",e.t1),e.abrupt("return",q.default.reject(e.t1));case 31:case"end":return e.stop()}},e,this,[[4,27]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getSeasonsData",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,a=(0,G.default)({},t),n=t.id,u=t.config,a.querystring=a.querystring||{},a.querystring.id=n,e.next=8,this.getData(a,"getSeasonsData");case 8:(r=e.sent).config=u,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",q.default.reject(e.t0));case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this,[[1,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllAssets",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.getAllAssets(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"searchAsset",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u,s,i,o,c;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},a=ye._getRequestHeaders(t.config),n={headers:a},e.prev=3,t.querystring=t.querystring||{},t.querystring.title=encodeURIComponent(t.querystring.title),u=this.apiRegistry.getPath(t,"searchAsset"),e.next=9,X.HttpLib.get(u,n);case 9:if(s=e.sent,i=me.safelyReturnNestedValue(["body","results","items",0],s)){e.next=15;break}throw Error("unable to fetch details");case 15:return o=me.updateUrlParameter(i.uri,"perPage",t.pathVars.perPage),t.querystring.ct&&(c={ct:t.querystring.ct},o+=me.createQueryParam({endpoint:o,data:c})),e.next=19,X.HttpLib.get(o,n);case 19:return(r=e.sent).entityDetails=i,e.abrupt("return",r);case 22:e.next=27;break;case 24:return e.prev=24,e.t0=e.catch(3),e.abrupt("return",q.default.reject(e.t0));case 27:case"end":return e.stop()}},e,this,[[3,24]])}));return function(t){return e.apply(this,arguments)}}()},{key:"loadMoreAssets",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},!(a=me.safelyReturnNestedValue(["body","results","assets","nextOffsetURL"],t.data,"")||me.safelyReturnNestedValue(["body","results","nextOffsetURL"],t.data,""))){e.next=15;break}return e.prev=3,n=ye._getRequestHeaders(t.config),u={headers:n},e.next=8,X.HttpLib.get(a,u);case 8:return r=e.sent,e.abrupt("return",r);case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",q.default.reject(e.t0));case 15:case"end":return e.stop()}},e,this,[[3,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchFromNextOffsetURL",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u=t.config,s=t.nextOffsetURL;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},!s){e.next=14;break}return e.prev=2,a=ye._getRequestHeaders(u),n={headers:a,skipcache:!0},e.next=7,X.HttpLib.get(s,n);case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",q.default.reject(e.t0));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this,[[2,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTray",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.config||t.originalReq.config,a=t.nextOffsetURL||t.assets.nextOffsetURL,e.next=4,this.fetchFromNextOffsetURL({config:r,nextOffsetURL:a});case 4:return n=e.sent,e.abrupt("return",n.body.results);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getTrayFromId",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.getData(t,"getTrayFromId");case 4:return a=e.sent,(n=a.results||{}).config=t.config,n.contentId=t.contentId,n.userId=t.userId,e.next=11,this.getTray(n);case 11:(r=e.sent).title=n.title,e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",q.default.reject(e.t0));case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}},e,this,[[1,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchGravityTray",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f,p,h,v,g;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,a=t.config,n=t.contentId,u=t.trayTypeId,s=void 0===u?"":u,i=t.title,o=void 0===i?"":i,c=t.addIdentifier,d=void 0===c?"":c,l=t.offset,f=void 0===l?0:l,p=t.pageName,h=t.userId,v=t.GRAVITY_SCENARIOS_IDS,g={config:a,trayType:"YMAL_TRAYS",orderId:s,contentTitle:o,scenarioId:d,offset:f,contentId:n,context:p,userId:h,subsStatusHeader:a.subsStatusHeader,GRAVITY_SCENARIOS_IDS:v},e.next=6,ie.commonOperations.getTray(g);case 6:r=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),console.log("gravity fetchGravityTray failed",e.t0),e.abrupt("return",q.default.reject(e.t0));case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCapeTray",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f,p;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,a=t.userId,n=t.addIdentifier,u=void 0===n?"":n,s=t.config,i=t.offset,o=void 0===i?0:i,c=t.token,d=t.size,l=void 0===d?oe.PAGINATION_SIZE:d,f=t.userToken,s.skipCache=!!c,p={userId:a,trayType:u,config:s,offset:o,size:l,token:c,userToken:f},e.next=7,ie.commonOperations.getTray(p);case 7:r=e.sent,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.warn("fetchCapeTray failed",e.t0),r=(0,W.default)({},oe.defaultTrayResponse);case 14:return r.title=r.title||t.title,e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPxTray",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.trayTypeId,a={},e.prev=2,e.t0=r,e.next=e.t0===oe.trayTypeIdMap.LEADERBOARD?6:10;break;case 6:return e.next=8,this.fetchLeaderboardTray(t);case 8:return a=e.sent,e.abrupt("break",11);case 10:a=(0,W.default)({},oe.defaultTrayResponse);case 11:e.next=17;break;case 13:e.prev=13,e.t1=e.catch(2),console.error("fetchPxTray failed",e.t1),a=(0,W.default)({},oe.defaultTrayResponse);case 17:return a.title=a.title||t.title,e.abrupt("return",a);case 19:case"end":return e.stop()}},e,this,[[2,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLeaderboardTray",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f,p,h;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,a=t.config,n=void 0===a?{}:a,u=t.assetFetchUri,s=t.assets,i=void 0===s?{}:s,o=t.userId,c=n.defaultLpv,d=i.items,l=void 0===d?[]:d,e.next=7,Ee.getLpvHeader(t);case 7:if(e.t0=e.sent){e.next=10;break}e.t0=c;case 10:if((f=e.t0)&&o){e.next=13;break}throw Error("failed to get LPV");case 13:if(n.lpvHeader=f,!i.nextOffsetURL){e.next=19;break}return e.next=17,this.fetchTray(t);case 17:return r=e.sent,e.abrupt("return",{assets:r});case 19:if(!u||l.length){e.next=26;break}return p=ye._getRequestHeaders(n),h={headers:p},e.next=24,X.HttpLib.get(u,h);case 24:return r=e.sent,e.abrupt("return",{assets:r.body.results});case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),console.warn("fetchLeaderboardTray",e.t1);case 31:return r=(0,W.default)({},oe.defaultTrayResponse),e.abrupt("return",r);case 33:case"end":return e.stop()}},e,this,[[1,28]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPersonaTray",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u,s,i;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={},e.prev=1,a=oe.trayTypeIdMap.PERSONA_WITHOUT_META,n=oe.trayTypeIdMap.PERSONA_WITH_META,u=oe.trayTypeIdMap.WATCHLIST,s=oe.trayTypeIdMap.PERSONA_MASTHEAD,i=t.trayTypeId,e.t0=i,e.next=e.t0===u?7:e.t0===a?11:e.t0===n?11:e.t0===s?11:14;break;case 7:return e.next=9,Ee.getWatchlist(t);case 9:return r=e.sent,e.abrupt("return",r);case 11:return e.next=13,Ee.fetchPersonaTray(t);case 13:r=e.sent;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(1),r=(0,W.default)({},oe.defaultTrayResponse);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e,this,[[1,16]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getTrayType",value:function(e){var t=e.traySource,r=e.trayTypeId,a=e.config,n=void 0===a?{}:a,u=n.ENABLE_CAPE_CW,s=n.usePersonaWachlist,i=oe.trayTypeIdMap.CONTINUE_WATCHING,o=oe.trayTypeIdMap.WATCHLIST,c=oe.trayTypeIdMap.PERSONA_WITHOUT_META,d=oe.trayTypeIdMap.PERSONA_WITH_META,l=oe.trayTypeIdMap.PERSONA_MASTHEAD,f=t?t.toLowerCase():"catalog";return r===i&&u?"cape":r===o&&s||e.trayTypeId===c||e.trayTypeId===d||e.trayTypeId===l?"persona":f}},{key:"getTray",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u,s,i;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.getTrayType(t),t.source=oe.trayTypeToSourceMap[r]||r,a={},n=t.assets||{},e.t0=r,e.next="catalog"===e.t0?7:"gravity"===e.t0?18:"px"===e.t0?24:"cape"===e.t0?29:"persona"===e.t0?36:43;break;case 7:if(n.items||n.nextOffsetURL||(n.items=[]),u=n.items||[],s=n,u.length&&!t.fetchMoreData||!n.nextOffsetURL){e.next=15;break}return e.next=13,this.fetchTray(t);case 13:i=e.sent,s=void 0!==i.assets?i.assets:i;case 15:return t.allCardsFetched=t.fetchMoreData&&!n.nextOffsetURL,t.assets=t.allCardsFetched?{items:[]}:s,e.abrupt("break",43);case 18:return e.next=20,this.fetchGravityTray(t);case 20:return a=e.sent,(t=(0,W.default)({},t,a)).cardLogic=a.cardLogic||t.addIdentifier,e.abrupt("break",43);case 24:return e.next=26,this.fetchPxTray(t);case 26:return a=e.sent,t=(0,W.default)({},t,a),e.abrupt("break",43);case 29:return t.traySource="cape",e.next=32,this.fetchCapeTray(t);case 32:return a=e.sent,(t=(0,W.default)({},t,a)).cardLogic=a.cardLogic||t.addIdentifier,e.abrupt("break",43);case 36:return t.traySource="persona",e.next=39,this.fetchPersonaTray(t);case 39:return a=e.sent,(t=(0,W.default)({},t,a)).cardLogic=t.addIdentifier,e.abrupt("break",43);case 43:return e.abrupt("return",t);case 44:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMoreTrays",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},a=t.trays,e.prev=2,n={config:t.config,nextOffsetURL:a.nextOffsetURL},e.next=6,this.fetchTray(n);case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getHomePageData",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f,p,h,v,g,y,_,E,m,I,T;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},a=t.menuApi,n=void 0===a?"":a,u=t.region,s=t.config,i=void 0===s?{}:s,o=t.headers,c=void 0===o?{}:o,d=i.variantList,l=void 0===d?[]:d,e.prev=3,n){e.next=6;break}throw Error("menuApi is not passed !!");case 6:return c=(0,W.default)({},ye._getRequestHeaders({region:u,variantList:l}),c),f={headers:c},e.next=10,X.HttpLib.get(n,f);case 10:(r=e.sent).config=i,r.body.statusCode=r.statusCode,p=r.body,h=(void 0===p?{}:p).results,g=(v=void 0===h?{}:h).trays,(y=void 0===g?{}:g).items=(0,se.filterOutP11NTrays)(y.items),y.items=y.items.filter(function(e){return!(0,se.isThirdPartyTray)(e)}),_=y.items.length,E=!!y.nextOffsetURL;case 20:if(_>=oe.contentPagination.betrayPageSize||!E){e.next=34;break}return e.next=23,this.fetchMoreTrays((0,W.default)({},v,{config:i}));case 23:(m=e.sent).items=(0,se.filterOutP11NTrays)(m.items),m.items=m.items.filter(function(e){return!(0,se.isThirdPartyTray)(e)}),I=[].concat((0,L.default)(y.items),(0,L.default)(m.items)),(T=(0,W.default)({},y,m)).items=I,v.trays=T,_=y.items.length,E=!!m.nextOffsetURL,e.next=20;break;case 34:e.next=40;break;case 36:return e.prev=36,e.t0=e.catch(3),console.log("Error while fetching home page data. menuApi:: "+n,e.t0),e.abrupt("return",q.default.reject(r));case 40:return e.abrupt("return",r);case 41:case"end":return e.stop()}},e,this,[[3,36]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getMasthead",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u,s,i,o,c;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],a=t.mastheadConfig,n=void 0===a?{}:a,u=t.config,s=void 0===u?{}:u,i=t.userToken,o=t.userId,c=t.pageName,e.prev=2,e.next=5,this.getTray((0,W.default)({},n,{config:s,userToken:i,userId:o,pageName:c}));case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log("ERROR::","Failed to fetch mastheads",e.t0),e.abrupt("return",q.default.reject(r));case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getTournamentData",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,(a=(0,G.default)({},t)).pathVars={seriesId:t.seriesId},e.next=6,this.getData(a,"getTournamentData");case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),q.default.resolve(e.t0);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"loadMoreSports",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.config,a=t.nextOffsetURL,e.next=3,this.fetchFromNextOffsetURL({config:r,nextOffsetURL:a});case 3:return(n=e.sent).config=r,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadMoreTournaments",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u,s,i;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,a=t.config,n=t.nextOffsetURL,u=ye._getRequestHeaders(a),s={headers:u},e.next=7,X.HttpLib.get(n,s);case 7:i=e.sent,r=i.body,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0,"error in loadMoreTournaments"),q.default.reject(e.t0);case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getTrays",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f,p,h,v,g,y,_=this;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=[],n=!1,e.prev=3,u=t.trays,s=t.userId,i=t.contentId,o=t.config,c=void 0===o?{}:o,d=t.pageName,l=t.userToken,f=u.size,u.items=(0,se.filterOutP11NTrays)(u.items),u.items=u.items.filter(function(e){return!(0,se.isThirdPartyTray)(e)}),p=u.items,u.page=u.page||0,h=u.page*oe.contentPagination.betrayPageSize,v=h+oe.contentPagination.betrayPageSize,g=p.length>v,n=!u.nextOffsetURL&&!g;case 14:if(v<=p.length){e.next=27;break}if(!n){e.next=17;break}return e.abrupt("break",27);case 17:return e.next=19,this.fetchMoreTrays(t);case 19:(y=e.sent).items=(y.items||[]).filter(function(e){return!(0,se.isThirdPartyTray)(e)}),y.items=(0,se.filterOutP11NTrays)(y.items),(y.items||[]).length&&(u.items=u.items.concat(y.items),p=u.items),u.nextOffsetURL=y.nextOffsetURL,n=!u.nextOffsetURL&&v>p.length,e.next=14;break;case 27:if((p=p.slice(h,v)).forEach(function(e){var t=me.getNewObjectCopy(e),r={userId:s,config:c,contentId:i,size:f,pageName:d,userToken:l},n=(0,G.default)(t,r);a.push(_.getTray(n))}),!a.length){e.next=33;break}return e.next=32,q.default.all(a).then(function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t});case 32:r=e.sent;case 33:return e.abrupt("return",{traysResp:r,traysReq:t,allTraysFetched:n});case 36:return e.prev=36,e.t0=e.catch(3),console.log("Error while fetching trays::",e.t0),e.abrupt("return",q.default.reject(e.t0));case 40:case"end":return e.stop()}},e,this,[[3,36]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getMultiContentDetails",value:function(){var e=(0,B.default)(H.default.mark(function e(t){return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ye.getMultiGetContent(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getVideoUrl",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f,p,h,v,g,y,_,E,m,I,T,b,k,R,P,C,A,O,S,w,x,N,M,D,L;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=t.personaData,a=t.reqConfig,n=void 0===a?{}:a,!1!==(u=de.default.getVideoUrl.request(t.cms)).result){e.next=6;break}return s=(0,he.default)(u.errorDetails,t),e.abrupt("return",q.default.reject(s));case 6:return i=0,o=r?Ee.getWatchPercentage(t):q.default.resolve(0),c=t.cms,d=c.drmTag,l=c.playbackUri,f=c.deviceInfo,p=c.isDrmProtected,h=c.isHooq,v=c.cdnChannel,g=c.entitlementDescription,y=void 0===g?{}:g,_=t.config.isPlaybackSecEnabled,E=void 0!==_&&_,(m=ye._getRequestHeaders())["x-dst-drm"]=d,m["x-device-info"]=f,E&&y.entitlementToken&&(m["x-et"]=y.entitlementToken),E&&y.ck&&(m["x-eck"]=y.ck),h||(m["x-platform-code"]=v),I=void 0,e.prev=17,e.next=20,X.HttpLib.get(l,{headers:m,skipCache:!0,fetchParams:n});case 20:I=e.sent,e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(17),T={error:e.t0,originalReq:t,success:!1},e.abrupt("return",q.default.reject(T));case 27:return e.prev=27,e.next=30,o;case 30:i=e.sent,e.next=36;break;case 33:e.prev=33,e.t1=e.catch(27),console.error("Error fetching watch percentage",e.t1);case 36:if(!1!==(b=de.default.getVideoUrl.response(I,p)).result){e.next=40;break}return k=(0,he.default)(b.errorDetails,t),e.abrupt("return",q.default.reject(k));case 40:R=void 0;try{R=I.body.results.item}catch(e){}if(R){e.next=45;break}return P=(0,he.default)(fe.default.GET_VIDEOURL_RESPONSE_INVALID_PAYLOAD,t),e.abrupt("return",q.default.reject(P));case 45:return A=(C=R).licenseUrl,O=C.certificateUrl,S=C.textTracks,w=C.playbackUrl,x=C.preRollUrl,N={src:w},M=S&&S.webvtt&&S.webvtt[0]&&S.webvtt[0].uri||"",D={licenseUri:A,certificateUrl:O,drmTag:d,vtt_url:h?"":M},e.abrupt("return",{success:!0,cdnResp:N,drmResp:D,isDrmProtected:p,textTracks:S,preRollUrl:x,watchPercentage:i,originalReq:t});case 52:return e.prev=52,e.t2=e.catch(0),console.error("exception in get videourl",e.t2),L=(0,he.default)(fe.default.GET_VIDEOURL_EXCEPTION,t),e.abrupt("return",q.default.reject(L));case 57:case"end":return e.stop()}},e,this,[[0,52],[17,23],[27,33]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getVideoUrlV2",value:function(){var e=(0,B.default)(H.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f,p,h,v,g,y,_,E,m,I,T,b,k,R,P,C,A,O,S,w,x,N,D;return H.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.reqHeaders,a=void 0===r?{}:r,n=t.reqConfig,u=void 0===n?{}:n,s=(0,W.default)({},a),i={},o={},c={},d=0,l=t.content,f=t.device,p=t.entitlement,h=void 0===p?{}:p,v=t.user,g=void 0===v?{}:v,y=t.personaData,_=void 0===y?null:y,E=l.contentId,m=l.externalContentId,I=l.playbackType,T="EXTERNAL"===I,b="getVideoUrlV2",k=_?Ee.getWatchPercentage(t):q.default.resolve(0),i.desiredConfig=(0,ue.generateTagsString)(t.tags),i.client=f.client,i.clientVersion=f.clientVersion,i.deviceId=f.deviceId,i.osName=f.osName,i.osVersion=f.osVersion,o.contentId=T?m:E,s.hotstarauth=ye._getRequestHeaders().hotstarauth,T?(b="getVideoUrlV2Exo",i.provider=l.contentProvider,s["x-hid"]=g.hid):h.et&&h.eck&&(s["x-et"]=h.et,s["x-eck"]=h.eck),e.prev=21,R=this.apiRegistry.getPath({querystring:i,pathVars:o},b),P=X.HttpLib.get(R,{headers:s,skipCache:!0,fetchParams:u}),e.next=26,q.default.all([P,k]);case 26:C=e.sent,A=(0,M.default)(C,2),c=A[0],d=A[1],e.next=36;break;case 32:return e.prev=32,e.t0=e.catch(21),O={error:e.t0,originalReq:t,success:!1},e.abrupt("return",q.default.reject(O));case 36:S=[],w=!1,x="",e.prev=39,S=c.body.results.playBackSets,w=c.body.results.match,x=c.body.results.drmClass,!d&&(d=0),e.next=50;break;case 46:return e.prev=46,e.t1=e.catch(39),N={error:e.t1,originalReq:t,success:!1},e.abrupt("return",q.default.reject(N));case 50:return e.abrupt("return",{success:!0,isMatch:w,playbackSets:S,watchPercentage:d,drmClass:x,originalReq:t});case 53:return e.prev=53,e.t2=e.catch(0),console.error("exception in get videourl",e.t2),D=(0,he.default)(fe.default.GET_VIDEOURL_EXCEPTION,t),e.abrupt("return",q.default.reject(D));case 58:case"end":return e.stop()}},e,this,[[0,53],[21,32],[39,46]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),n(S.prototype,"getMovieData",[u,s],(0,x.default)(S.prototype,"getMovieData"),S.prototype),n(S.prototype,"getEpisodeData",[i,o],(0,x.default)(S.prototype,"getEpisodeData"),S.prototype),n(S.prototype,"getClipData",[c,d],(0,x.default)(S.prototype,"getClipData"),S.prototype),n(S.prototype,"getMatchData",[l,f],(0,x.default)(S.prototype,"getMatchData"),S.prototype),n(S.prototype,"getShowData",[p],(0,x.default)(S.prototype,"getShowData"),S.prototype),n(S.prototype,"getWatchPageData",[h],(0,x.default)(S.prototype,"getWatchPageData"),S.prototype),n(S.prototype,"getDetailPageData",[v],(0,x.default)(S.prototype,"getDetailPageData"),S.prototype),n(S.prototype,"getSeasonsData",[g],(0,x.default)(S.prototype,"getSeasonsData"),S.prototype),n(S.prototype,"searchAsset",[y,_],(0,x.default)(S.prototype,"searchAsset"),S.prototype),n(S.prototype,"loadMoreAssets",[E],(0,x.default)(S.prototype,"loadMoreAssets"),S.prototype),n(S.prototype,"getTray",[m],(0,x.default)(S.prototype,"getTray"),S.prototype),n(S.prototype,"getHomePageData",[I],(0,x.default)(S.prototype,"getHomePageData"),S.prototype),n(S.prototype,"getMasthead",[T],(0,x.default)(S.prototype,"getMasthead"),S.prototype),n(S.prototype,"getTournamentData",[b],(0,x.default)(S.prototype,"getTournamentData"),S.prototype),n(S.prototype,"loadMoreSports",[k],(0,x.default)(S.prototype,"loadMoreSports"),S.prototype),n(S.prototype,"loadMoreTournaments",[R],(0,x.default)(S.prototype,"loadMoreTournaments"),S.prototype),n(S.prototype,"getTrays",[P,C],(0,x.default)(S.prototype,"getTrays"),S.prototype),n(S.prototype,"getVideoUrl",[A],(0,x.default)(S.prototype,"getVideoUrl"),S.prototype),n(S.prototype,"getVideoUrlV2",[O],(0,x.default)(S.prototype,"getVideoUrlV2"),S.prototype),S)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),n=a.utils.baseUtils,u={adGroupId:"",actors:[],adult:!1,anchors:[],image:{},broadcastDate:"",castEnabled:!0,channelId:0,channelName:"",chapter:0,contentId:"",description:"",directors:[],disney:!1,downladable:!1,drmProtected:!1,duration:0,episodeNo:0,fox:!1,freemium:!1,genre:"",highlight:!1,lang:"en",live:!1,matchId:0,premium:!1,publishDate:"",recommended:!0,replay:!1,seasonId:0,seasonName:"",seasonNo:0,showId:0,siMatchId:0,showName:"",supportSimulcast:!0,tags:[],title:""};u=n.getNewObjectCopy(u),t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseWatchPageModel=void 0;var a=r(0),n=a.utils.baseUtils,u={apiUri:"",canPlay:!0,contentDetail:{},description:"",errorCodeForPlayback:0,id:0,needLayout:!0,pageType:"",playbackURL:"",seoData:{desc:"",h1:"",metatags:[""],title:""},trays:{items:[],nextOffsetURL:"",page:0,pageSize:0,totalPages:0,totalResults:0}};t.baseWatchPageModel=u=n.getNewObjectCopy(u),t.baseWatchPageModel=u},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),u=a(n),s=r(3),i=a(s),o=r(1),c=a(o),d=r(4),l=a(d),f=r(5),p=a(f),h=r(39),v=a(h),g=r(245),y=a(g);t.default=new(function(e){function t(){(0,c.default)(this,t);var e=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e.apiConfigs=[].concat((0,u.default)(y.default),(0,u.default)(e.cmsConfigs||[])),e._defaultOptions={appVersion:"5.0.40"},e}return(0,p.default)(t,e),t}(v.default))(y.default)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),n=function(e){return e&&e.__esModule?e:{default:e}}(a),u=r(39),s=[{endPoint:n.default.constants.CMS_GET_ASSETS,apis:{getAllAssets:{route:"/{assetType}/list?{apiQueryString}"},searchAsset:{route:"/{assetType}/search?{apiQueryString}"},getEpisodeDetails:{route:"/episode/detail?{apiQueryString}"},getShowDetails:{route:"/show/detail?{apiQueryString}"},getMovieDetails:{route:"/movie/detail?{apiQueryString}"},getNewsClipDetails:{route:"/content/detail?{apiQueryString}"},getTrayFromId:{route:"/tray/find?{apiQueryString}"},getSeasonsData:{route:"/season/detail?{apiQueryString}"},getTournamentData:{route:"/page/{seriesId}?{apiQueryString}"},getSportClipDetails:{route:"/match/detail?{apiQueryString}"}}},{endPoint:n.default.constants.CMS_PLAY_API,apis:{getVideoUrlV2Exo:{route:"/e/v2/play/{tenant}/contents/{contentId}?{apiQueryString}"},getVideoUrlV2:{route:"/h/v2/play/{tenant}/contents/{contentId}?{apiQueryString}"}}}];s.concat(u.commonApiList),t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getImageType=function(e){try{return a.imageTypes.IMAGE_TYPE[e.contentType]||"hs"}catch(e){return"hs"}},t.filterOutP11NTrays=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["GRAVITY","CAPE","THIRD_PARTY"];return s.initConfig.getConfig().isP13NEnabled?e:e=e.filter(function(e){return 0>t.indexOf(e.traySource.toUpperCase())})},t.isThirdPartyTray=function(e){var t=e.traySource,r=void 0===t?"":t,a=e.trayTypeId,n=i.indexOf(a)>-1;return"third_party"===r.toLowerCase()&&!n};var a=r(19),n=r(0),u=function(e){return e&&e.__esModule?e:{default:e}}(n),s=u.default.config,i=[402,51]},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(88),u=a(n),s=r(83),i=a(s),o=r(248),c=a(o);t.default={getVideoUrl:{request:function(e){var t=e.drmTag,r=e.playbackUri,a=e.isDrmProtected;return(0,c.default)([{method:function(){return i.default.isString(r)},errorDetails:u.default.GET_VIDEOURL_REQUEST_PLAYBACK_URI_MISSING},{method:function(){return!a||i.default.isString(t)},errorDetails:u.default.GET_VIDEOURL_REQUEST_DRM_TAG_INVALID}])},response:function(e,t){if("OK"===e.statusCode){var r=void 0;try{r=e.body.results.item}catch(e){}return(0,c.default)([{method:function(){return i.default.isObject(r)},errorDetails:u.default.GET_VIDEOURL_RESPONSE_INVALID_PAYLOAD},{method:function(){return i.default.isString(r.playbackUrl)},errorDetails:u.default.GET_VIDEOURL_RESPONSE_PLAYBACK_URL_MISSING},{method:function(){return!t||i.default.isString(r.licenseUrl)},errorDetails:u.default.GET_VIDEOURL_RESPONSE_LICENSE_MISSING}])}return{result:!0}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.reduce(function(e,t){return e.result?t.method()?e:{result:!1,errorDetails:t.errorDetails}:e},{result:!0})}},function(e,t,r){e.exports={default:r(250),__esModule:!0}},function(e,t,r){r(61),r(34),r(45),r(251),r(257),r(260),r(262),e.exports=r(10).Set},function(e,t,r){"use strict";var a=r(252),n=r(115);e.exports=r(253)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return a.def(n(this,"Set"),e=0===e?0:e,e)}},a)},function(e,t,r){"use strict";var a=r(23).f,n=r(52),u=r(74),s=r(25),i=r(71),o=r(46),c=r(64),d=r(95),l=r(102),f=r(21),p=r(57).fastKey,h=r(115),v=f?"_s":"size",g=function(e,t){var r,a=p(t);if("F"!==a)return e._i[a];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var d=e(function(e,a){i(e,d,t,"_i"),e._t=t,e._i=n(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=a&&o(a,r,e[c],e)});return u(d.prototype,{clear:function(){for(var e=h(this,t),r=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete r[a.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var r=h(this,t),a=g(r,e);if(a){var n=a.n,u=a.p;delete r._i[a.i],a.r=!0,u&&(u.n=n),n&&(n.p=u),r._f==a&&(r._f=n),r._l==a&&(r._l=u),r[v]--}return!!a},forEach:function(e){h(this,t);for(var r,a=s(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(a(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!g(h(this,t),e)}}),f&&a(d.prototype,"size",{get:function(){return h(this,t)[v]}}),d},def:function(e,t,r){var a,n,u=g(e,t);return u?u.v=r:(e._l=u={i:n=p(t,!0),k:t,v:r,p:a=e._l,n:void 0,r:!1},e._f||(e._f=u),a&&(a.n=u),e[v]++,"F"!==n&&(e._i[n]=u)),e},getEntry:g,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=h(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?d(0,"keys"==t?r.k:"values"==t?r.v:[r.k,r.v]):(e._t=void 0,d(1))},r?"entries":"values",!r,!0),l(t)}}},function(e,t,r){"use strict";var a=r(14),n=r(13),u=r(57),s=r(29),i=r(26),o=r(74),c=r(46),d=r(71),l=r(20),f=r(44),p=r(23).f,h=r(254)(0),v=r(21);e.exports=function(e,t,r,g,y,_){var E=a[e],m=E,I=y?"set":"add",T=m&&m.prototype,b={};return v&&"function"==typeof m&&(_||T.forEach&&!s(function(){(new m).entries().next()}))?(m=t(function(t,r){d(t,m,e,"_c"),t._c=new E,void 0!=r&&c(r,y,t[I],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in T&&(!_||"clear"!=e)&&i(m.prototype,e,function(r,a){if(d(this,m,e),!t&&_&&!l(r))return"get"==e&&void 0;var n=this._c[e](0===r?0:r,a);return t?this:n})}),_||p(m.prototype,"size",{get:function(){return this._c.size}})):(m=g.getConstructor(t,e,y,I),o(m.prototype,r),u.NEED=!0),f(m,e),b[e]=m,n(n.G+n.W+n.F,b),_||g.setStrong(m,e,y),m}},function(e,t,r){var a=r(25),n=r(67),u=r(31),s=r(53),i=r(255);e.exports=function(e,t){var r=1==e,o=2==e,c=3==e,d=4==e,l=6==e,f=5==e||l,p=t||i;return function(t,i,h){for(var v,g,y=u(t),_=n(y),E=a(i,h,3),m=s(_.length),I=0,T=r?p(t,m):o?p(t,0):void 0;m>I;I++)if((f||I in _)&&(v=_[I],g=E(v,I,y),e))if(r)T[I]=g;else if(g)switch(e){case 3:return!0;case 5:return v;case 6:return I;case 2:T.push(v)}else if(d)return!1;return l?-1:c||d?d:T}}},function(e,t,r){var a=r(256);e.exports=function(e,t){return new(a(e))(t)}},function(e,t,r){var a=r(20),n=r(105),u=r(15)("species");e.exports=function(e){var t;return n(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!n(t.prototype)||(t=void 0),a(t)&&null===(t=t[u])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){var a=r(13);a(a.P+a.R,"Set",{toJSON:r(258)("Set")})},function(e,t,r){var a=r(55),n=r(259);e.exports=function(e){return function(){if(a(this)!=e)throw TypeError(e+"#toJSON isn't generic");return n(this)}}},function(e,t,r){var a=r(46);e.exports=function(e,t){var r=[];return a(e,!1,r.push,r,t),r}},function(e,t,r){r(261)("Set")},function(e,t,r){"use strict";var a=r(13);e.exports=function(e){a(a.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){r(263)("Set")},function(e,t,r){"use strict";var a=r(13),n=r(41),u=r(25),s=r(46);e.exports=function(e){a(a.S,e,{from:function(e){var t,r,a,i,o=arguments[1];return n(this),(t=void 0!==o)&&n(o),void 0==e?new this:(r=[],t?(a=0,i=u(o,arguments[2],2),s(e,!1,function(e){r.push(i(e,a++))})):s(e,!1,r.push,r),new this(r))}})}},function(e,t,r){e.exports={default:r(265),__esModule:!0}},function(e,t,r){r(266),e.exports=r(10).Object.values},function(e,t,r){var a=r(13),n=r(267)(!1);a(a.S,"Object",{values:function(e){return n(e)}})},function(e,t,r){var a=r(21),n=r(36),u=r(27),s=r(47).f;e.exports=function(e){return function(t){for(var r,i=u(t),o=n(i),c=o.length,d=0,l=[];c>d;)r=o[d++],a&&!s.call(i,r)||l.push(e?[r,i[r]]:i[r]);return l}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0);t.default=[{endPoint:function(e){return e&&e.__esModule?e:{default:e}}(a).default.constants.PERSONA_PLATFORM,apis:{continueWatchingTray:{route:"/v1/users/{userId}/preferences/continue-watching?{apiQueryString}"},lpv:{route:"/v1/users/{userId}/preferences?{apiQueryString}"},postLpv:{route:"/users/{userId}/preferences?{apiQueryString}"},getPersonaTray:{route:"/{relativePath}"},getWatchNext:{route:"/v1/users/{userId}/trays/watch-next?{apiQueryString}"},watchlist:{route:"/v1/users/{userId}/trays/watchlist?{apiQueryString}"},watchlistItem:{route:"/v1/users/{userId}/trays/watchlist/{contentId}?{apiQueryString}"}}}]},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),u=a(n),s=r(18),i=a(s),o=r(9),c=a(o),d=r(17),l=a(d),f=r(1),p=a(f),h=r(2),v=a(h),g=r(0),y=r(19),_=r(38),E=a(_),m=r(59),I=a(m),T=r(51),b=new E.default,k=g.utils.baseUtils;t.default=function(){function e(){var t=this;(0,p.default)(this,e),this.removeCWItemRequest=function(e){if(t.isValidRequest(e)){var r=e.contentIds,a=void 0===r?[]:r;if(a.length)return e.contentIds=a.map(function(e){return e+""}),e}},this.fetchCWTrayResponse=function(e){var r=e.request,a=void 0===r?{}:r,n=e.response,u=void 0===n?{}:n,s=a.contentIds,i=a.showId;if(!u.status||!u.data||!u.data.items)return console.error("Failed to parse Continue watching tray from persona: ",u),{data:{items:{},reqContentIds:s,reqShowId:i},status:!0};var o={},c=[];return u.data.items.forEach(function(e){e.timestamp*=1e3,e.showId=e.show_id,e.showContentId=e.show_content_id,delete e.show_id,delete e.show_content_id,o[e.item_id]=e,c.push(e.item_id)}),(0,l.default)(u.data,{items:o,updatedAt:1e3*u.data.updated_at||t._getDefaultCWExpiryTime(),orderedContentIds:c,reqContentIds:s,reqShowId:i}),u},this.getLpvHeaderResponse=function(e){var r=e.languages;return(void 0===r?[]:r).sort(t._sortBasedOnCode).map(t._getLangCode).join("~")},this._sortBasedOnCode=function(e,t){var r=e.code,a=t.code;return r===a?0:a>r?-1:1},this._getLangCode=function(e){return e.code+"="+e.level},this._getFilledItems=function(e,t){return e.filter(function(e){return!!t[e]}).map(function(e){return b.addMetaProperties(t[e])})},this.getWatchNextResponse=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};try{var r=e.multiContentMap,a=e.outputNameValues,n=void 0===a?[]:a,u=e.data,s=void 0===u?{}:u,i=s.items[0],o=s.tray_source,d=i&&r[i]||{};t=(0,c.default)({},d,{contentTitle:d.title,language:d.lang,outputNameValues:n,source:y.apiSource.PERSONA,cardLogic:"watch_next_"+o})}catch(r){console.error("Error in processing the response of getWatchNext : ",e,r),t={status:!1,error:r}}return t},this.fetchPersonaTrayResponse=function(e){var r=e.request,a=e.resp,n=k.getNewObjectCopy(y.defaultTrayResponse);if(!(0,i.default)(a).length)return n;var u=a.data,s=void 0===u?{}:u,o=s.items,c=void 0===o?{}:o,d=s.itemids,f=void 0===d?[]:d,p=t._getFilledItems(f,c);return(0,l.default)(n.assets,{items:p,nextOffsetURL:s.next_page_url}),n.title=a.title||r.title,n},this.getWatchlistResponse=function(e){var r=e.request,a=void 0===r?{}:r,n=e.response,u=void 0===n?{}:n,s=k.getNewObjectCopy(y.defaultTrayResponse),i=a.title,o=void 0===i?"Watchlist":i,c=a.userId,d=u.data,f=void 0===d?{}:d,p=u.cache,h=u.status,v=void 0===h||h,g=f.itemids,_=void 0===g?[]:g,E=f.items,m=void 0===E?{}:E;if(p)return u;var T=t._getFilledItems(_,m);return(0,l.default)(s.assets,{items:T,page:1,pageSize:T.length,totalPages:1,totalResults:T.length}),(0,l.default)(s,{title:o,userId:c,cardLogic:"WATCHLIST_TRAY",status:v}),v&&I.default.setWatchlist(s),s}}return(0,v.default)(e,[{key:"isValidRequest",value:function(e){if("object"!==(void 0===e?"undefined":(0,u.default)(e))||null==e)return!1;var t=e.userId,r=e.config,a=void 0===r?{}:r;return!(!t||!a.ENABLE_CAPE_CW)}},{key:"updateLocalCWDataRequest",value:function(e){if(e){var t=e.userId,r=e.cwTray;if(t&&Array.isArray(r)){var a={};return r.forEach(function(e){var t=e.item_id;a[t]={w:e.watched,t:e.timestamp};var r=a[t];e.tag&&(r.tag=e.tag),e.showContentId&&(r.scId=e.showContentId),e.showId&&(r.sId=e.showId),e.removed&&(r.r=1)}),{userId:t,cwTray:a}}}}},{key:"updateCWTrayItemRequest",value:function(e){if("object"===(void 0===e?"undefined":(0,u.default)(e))&&null!==e){var t=e.contentId,r=e.percentage,a=e.userId;if(t&&void 0!==r&&a)return e}}},{key:"_getDefaultCWExpiryTime",value:function(){return new Date(Date.now()-2592e6).getTime()}},{key:"fetchLocalCWTrayResponse",value:function(e){if("object"!==(void 0===e?"undefined":(0,u.default)(e))||null===e)return{};var t={};return(0,i.default)(e).forEach(function(r){var a=e[r];a.r||(t[r]={item_id:r,watched:a.w,timestamp:a.t,tag:a.tag,showContentId:a.scId,showId:a.sId})}),t}},{key:"getContentDetailsResponse",value:function(e){return e&&e.results&&e.results.map?e.results.map:{}}},{key:"getContinueWatchingTrayResponse",value:function(e){var t=e.data,r=e.token,a=e.offset,n=t;return t?(a&&(n=t.slice(a)),{assets:{items:n,nextOffsetURL:"",page:1,pageSize:t.length,totalPages:1,totalResults:n.length,token:r}}):T.baseTrayModel}}]),e}()},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageInterface=t.NetworkInterface=void 0;var n=r(271),u=a(n),s=r(272),i=a(s);t.default={NetworkInterface:u.default,LocalStorageInterface:i.default},t.NetworkInterface=u.default,t.LocalStorageInterface=i.default},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(18),u=a(n),s=r(9),i=a(s),o=r(7),c=a(o),d=r(6),l=a(d),f=r(8),p=a(f),h=r(1),v=a(h),g=r(2),y=a(g),_=r(0),E=a(_),m=r(116),I=a(m),T=r(117),b=a(T),k=r(118),R=a(k),P=r(119),C=r(19),A=new I.default,O=E.default.config,S=_.utils.baseUtils;t.default=new(function(){function e(){(0,v.default)(this,e),this.apiRegistry=b.default,this._cache={}}return(0,y.default)(e,[{key:"fetchLpv",value:function(){var e=(0,p.default)(c.default.mark(function e(t){var r,a,n,u,s,i=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userId,a=t.config,n=void 0===a?{}:a,u="fetchLpv"+"_"+r,!(s=this._cache[u])||n.skipCache){e.next=6;break}return e.abrupt("return",s);case 6:return s=new l.default(function(){var e=(0,p.default)(c.default.mark(function e(r){var a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i._fetchLpv(t);case 2:a=e.sent,r(a);case 4:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}()),this._cache[u]=s,e.abrupt("return",s);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchLpv",value:function(){var e=(0,p.default)(c.default.mark(function e(t){var r,a,n,u,s,i,o,d,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,a=t.config,n=void 0===a?{}:a,u=t.userToken,s={},i={pathVars:{userId:r}},e.prev=3,o=A.getAuthToken({userToken:u}),d={headers:{hotstarauth:o},expireAt:-1},n.PERSONA_API_TIMEOUT&&(d.apiTimeOut=n.PERSONA_API_TIMEOUT),l=this.apiRegistry.getPath(i,"lpv"),e.next=10,_.HttpLib.get(l,d);case 10:s=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.warn("Error while fetching LPV",e.t0);case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}},e,this,[[3,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCwTray",value:function(){var e=(0,p.default)(c.default.mark(function e(t){var r,a,n,u,s,i,o,d,f=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userId,a=t.contentIds,n=void 0===a?[]:a,u=t.config,s=void 0===u?{}:u,i=t.showId,!(s.skipCache||n.length||i)){e.next=3;break}return e.abrupt("return",this._fetchCwTray(t));case 3:if(o="fetchCwTray"+"_"+r,!(d=this._cache[o])){e.next=8;break}return e.abrupt("return",d);case 8:return d=new l.default(function(){var e=(0,p.default)(c.default.mark(function e(r){var a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f._fetchCwTray(t);case 2:a=e.sent,r(a);case 4:case"end":return e.stop()}},e,f)}));return function(t){return e.apply(this,arguments)}}()),this._cache[o]=d,e.abrupt("return",d);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchCwTray",value:function(){var e=(0,p.default)(c.default.mark(function e(t){var r,a,n,s,o,d,l,f,p,h,v,g,y,E,m,I;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userId,a=t.contentIds,n=void 0===a?[]:a,s=t.config,o=void 0===s?{}:s,d=t.showId,l=t.size,f=void 0===l?C.PAGINATION_SIZE:l,p=t.token,h=t.userToken,v={},g={pathVars:{userId:r}},y={},o.ENABLE_CAPE_CW){e.next=7;break}return e.abrupt("return",v);case 7:return e.prev=7,E=(0,i.default)({},A._getRequestHeaders((0,i.default)({},o,{userToken:h})),R.default.getLpvAndSubsStatusObj(r,o)),m={headers:E,expireAt:30},o.PERSONA_API_TIMEOUT&&(m.apiTimeOut=o.PERSONA_API_TIMEOUT),n.length>0&&(y.item_id=n.join(",")),d&&(y.show_id=d),f&&(y.size=f),p&&(y.token=p),(0,u.default)(y).length>0&&(g.querystring=y),I=this.apiRegistry.getPath(g,"continueWatchingTray"),e.next=19,_.HttpLib.get(I,m);case 19:v=e.sent,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(7),console.error("Error while fetching Continue watching tray from persona",e.t0);case 25:return e.abrupt("return",v);case 26:case"end":return e.stop()}},e,this,[[7,22]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchWatchNext",value:function(){var e=(0,p.default)(c.default.mark(function e(t){var r,a,n,u,s,i,o,d,l,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.contentId,a=t.userId,n=t.numberLimit,u=void 0===n?1:n,s=t.userToken,i={},o={},d=A._getRequestHeaders({userToken:s}),l={headers:d},o.pathVars={userId:a},o.querystring={item_id:r,limit:u},f=this.apiRegistry.getPath(o,"getWatchNext"),e.next=10,_.HttpLib.get(f,l);case 10:if((i=e.sent).status){e.next=13;break}throw Error("Unable to fetch Watch next as API returns status as False.");case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPersonaTrayData",value:function(){var e=(0,p.default)(c.default.mark(function e(t,r){var a,n,u,s,o,d,l,f,p,h,v,g,y,E,m,I,T,b;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},n=t.assets,u=void 0===n?{}:n,s=t.userId,o=t.config,d=void 0===o?{}:o,l=t.userToken,f=u.items,p=void 0===f?[]:f,h=void 0,s){e.next=6;break}throw Error("Failed to get persona tray due to the absence of userId");case 6:if(p.length||t.fetchMoreData){e.next=11;break}v={P_ID:s,SIZE:t.size||20},h=R.default.getPathFromMacrosHash(t.addIdentifier,v),e.next=16;break;case 11:if(!t.fetchMoreData||!u.nextOffsetURL){e.next=15;break}h=u.nextOffsetURL,e.next=16;break;case 15:return e.abrupt("return",a);case 16:return g=(0,i.default)({},A._getRequestHeaders((0,i.default)({},d,{userToken:l})),R.default.getLpvAndSubsStatusObj(s,d)),y={headers:g},d.PERSONA_API_TIMEOUT&&(y.apiTimeOut=d.PERSONA_API_TIMEOUT),(E={}).pathVars={relativePath:h},m=O.initConfig.getConfig(),I=m.apiQueryString,T=void 0===I?"":I,E.querystring=S.toQueryStringObject(T),b=this.apiRegistry.getPath(E,"getPersonaTray"),e.next=26,_.HttpLib.get(b,y);case 26:if((a=e.sent).status){e.next=29;break}throw Error("Unable to fetch Watch next as API returns status as False.");case 29:return e.abrupt("return",a);case 30:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchWatchlist",value:function(){var e=(0,p.default)(c.default.mark(function e(t){var r,a,n,u,s,i=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userId,a=t.config,n=void 0===a?{}:a,u="fetchWatchlist"+"_"+r,!(s=this._cache[u])||n.skipCache){e.next=6;break}return e.abrupt("return",s);case 6:return s=new l.default(function(){var e=(0,p.default)(c.default.mark(function e(r,a){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i._fetchWatchlist(t);case 3:n=e.sent,r(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(e.t0);case 10:case"end":return e.stop()}},e,i,[[0,7]])}));return function(t,r){return e.apply(this,arguments)}}()),this._cache[u]=s,e.abrupt("return",s);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchWatchlist",value:function(){var e=(0,p.default)(c.default.mark(function e(t){var r,a,n,u,s,o,d,l,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,a=t.config,n=void 0===a?{}:a,u=t.userToken,s={},o={},d=n.PERSONA_WATCHLIST?(0,i.default)({},A._getRequestHeaders({userToken:u}),R.default.getLpvAndSubsStatusObj(r,n)):{hotstarauth:A.getAuthToken()},l={headers:d},o.pathVars={userId:r},o.querystring={meta:!0,limit:200},f=this.apiRegistry.getPath(o,"watchlist"),e.next=10,_.HttpLib.get(f,l);case 10:return s=e.sent,e.abrupt("return",s);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"watchlistItemOperation",value:function(){var e=(0,p.default)(c.default.mark(function e(t,r){var a,n,u,s,o,d,l,f,p;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.userId,n=t.contentId,u=t.PERSONA_WATCHLIST,s=t.userToken,o=u?(0,i.default)({},A._getRequestHeaders({userToken:s}),R.default.getLpvAndSubsStatusObj(a,t)):{hotstarauth:A.getAuthToken()},d={headers:o},(l={}).pathVars={userId:a,contentId:n},f=this.apiRegistry.getPath(l,"watchlistItem"),p={},e.t0=r,e.next=e.t0===P.WL_OPERATIONS.ADD?10:e.t0===P.WL_OPERATIONS.DELETE?14:e.t0===P.WL_OPERATIONS.READ?18:22;break;case 10:return e.next=12,_.HttpLib.put(f,d);case 12:return p=e.sent,e.abrupt("break",22);case 14:return e.next=16,_.HttpLib.delete(f,d);case 16:return p=e.sent,e.abrupt("break",22);case 18:return e.next=20,_.HttpLib.get(f,d);case 20:return p=e.sent,e.abrupt("break",22);case 22:return e.abrupt("return",p);case 23:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}]),e}())},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),u=a(n),s=r(60),i=a(s),o=r(22),c=a(o),d=r(9),l=a(d),f=r(18),p=a(f),h=r(28),v=a(h),g=r(6),y=a(g),_=r(8),E=a(_),m=r(1),I=a(m),T=r(2),b=a(T),k=r(0),R=a(k),P=R.default.constants,C=P.RUC_MASTER_KEY,A=P.LPV_KEY;t.default=new(function(){function e(){(0,I.default)(this,e)}return(0,b.default)(e,[{key:"rucSetModule",value:function(){var e=(0,E.default)(u.default.mark(function e(t){var r=this,a=t.reqModule,n=void 0===a?"":a,s=t.reqData,o=void 0===s?{}:s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new y.default(function(){var e=(0,E.default)(u.default.mark(function e(t,a){var s,d,f,h,g;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window||a(Error("ruc calls should not be made on server side")),s={},d=window.localStorage;try{n&&(o||"object"===(void 0===o?"undefined":(0,v.default)(o)))||t(!1),f=o,h=JSON.parse(d.getItem(C))||{},(g=h[n])&&(0,p.default)(g).length>0?(g=(0,l.default)({},g,f),s=(0,l.default)({},h,(0,c.default)({},n,g))):s=(0,l.default)({},h,(0,c.default)({},n,f)),d.setItem(C,(0,i.default)(s)),d.getItem(C),t(!0)}catch(e){t(!1)}t(!0);case 5:case"end":return e.stop()}},e,r)}));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"rucSetItem",value:function(){var e=(0,E.default)(u.default.mark(function e(t){var r=this,a=t.reqModule,n=void 0===a?"":a,s=t.reqKey,o=void 0===s?"":s,d=t.reqData,f=void 0===d?{}:d;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new y.default(function(){var e=(0,E.default)(u.default.mark(function e(t,a){var s,d,h,g,y;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window||a(Error("ruc calls should not be made on server side")),s={},d=window.localStorage,e.prev=3,n&&o&&(f||"object"===(void 0===f?"undefined":(0,v.default)(f)))||t(!1),(h=f).timestamp=(new Date).getTime(),e.next=9,r.rucGetItem({reqModule:n});case 9:g=e.sent,y=JSON.parse(d.getItem(C)),g&&(0,p.default)(g).length>0?(g[o]=h,s=(0,l.default)({},y,(0,c.default)({},n,g))):s=(0,l.default)({},y,(0,c.default)({},n,(0,c.default)({},o,h))),d.setItem(C,(0,i.default)(s)),d.getItem(C),t(!0),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),t(!1);case 20:t(!0);case 21:case"end":return e.stop()}},e,r,[[3,17]])}));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"rucGetItem",value:function(){var e=(0,E.default)(u.default.mark(function e(t){var r=t.reqModule,a=void 0===r?"":r,n=t.reqKey,s=void 0===n?"":n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new y.default(function(e,t){window||t(Error("ruc calls should not be made on server side"));var r=window.localStorage,n={},u={};try{a||s||e(n);var i=JSON.parse(r.getItem(C));s||(u=i[a],e(u)),u=i[a][s],n=u}catch(e){}e(n)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"rucRemoveItem",value:function(){var e=(0,E.default)(u.default.mark(function e(t){var r=t.reqModule,a=void 0===r?"":r,n=t.reqKey,s=void 0===n?"":n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new y.default(function(e,t){window||t(Error("ruc calls should not be made on server side"));var r=window.localStorage;a||s||e(!1);try{var n=JSON.parse(r.getItem(C));s?(delete n[a][s],r.setItem(C,(0,i.default)(n))):(delete n[a],r.setItem(C,(0,i.default)(n)))}catch(t){e(!1)}e(!0)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getLpv",value:function(){var e=(0,E.default)(u.default.mark(function e(t){var r,a=t.userId;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,this.rucGetItem({reqModule:A,reqKey:a});case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Failed to get lpv data from localStorage");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"setLpv",value:function(){var e=(0,E.default)(u.default.mark(function e(t){var r,a=t.userId,n=t.lpvData,s=void 0===n?{}:n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,e.prev=1,e.next=4,this.rucSetItem({reqModule:A,reqKey:a,reqData:s});case 4:r=!!e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return r||console.error("Failed to set lpv data in local storage",a,s),e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()}]),e}())},function(e,t,r){"use strict";var a=r(89),n=function(e){return e&&e.__esModule?e:{default:e}}(a);(0,r(0).registerOperations)("RUC",n.default)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n,u,s=r(12),i=a(s),o=r(7),c=a(o),d=r(6),l=a(d),f=r(8),p=a(f),h=r(1),v=a(h),g=r(2),y=a(g),_=r(0),E=r(275),m=a(E),I=r(276),T=a(I),b=new m.default,k=(n=(0,_.responseAdapter)(b.checkIfContentWatchedResponse),function(e,t,r,a,n){var u={};Object.keys(a).forEach(function(e){u[e]=a[e]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},u),n&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(n):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(e,t,u),u=null)}((u=function(){function e(){(0,v.default)(this,e),this.apiRegistry=new T.default}return(0,y.default)(e,[{key:"checkIfContentWatched",value:function(){var e=(0,p.default)(c.default.mark(function e(t){var r,a,n,u,s,i,o,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},a={},e.prev=2,n={userId:t.userId,matchId:t.matchId},a={querystring:n},u=this.apiRegistry.getPath(a,"checkIfContentWatched"),s={headers:{Pragma:"akamai-x-cache-on"},skipCache:!0,respHeader:!0,type:"xml"},e.next=9,_.HttpLib.get(u,s);case 9:r=e.sent,i=r.headers,o=i.get("x-cache"),d=0>o.indexOf("TCP_MISS"),r.contentWatched=d,e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(2),console.log("AKAMAI::checkIfContentWatched::",e.t0),e.abrupt("return",l.default.reject(e.t0));case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}},e,this,[[2,16]])}));return function(t){return e.apply(this,arguments)}}()}]),e}()).prototype,"checkIfContentWatched",[n],(0,i.default)(u.prototype,"checkIfContentWatched"),u.prototype),u);t.default=(0,_.registerOperations)("AKAMAI",k)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),n=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=function e(){(0,n.default)(this,e),this.checkIfContentWatchedResponse=function(e){return{contentWatched:e.contentWatched}}}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),u=a(n),s=r(1),i=a(s),o=r(4),c=a(o),d=r(5),l=a(d),f=r(16),p=a(f),h=r(277),v=a(h);t.default=function(e){function t(){(0,i.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.apiConfigs=v.default,e}return(0,l.default)(t,e),t}(p.default)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0);t.default=[{endPoint:function(e){return e&&e.__esModule?e:{default:e}}(a).default.constants.USER_VIEWED_CONTENT_AKAMAI,apis:{checkIfContentWatched:{route:"/status.txt"}}}]},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n,u,s=r(12),i=a(s),o=r(22),c=a(o),d=r(7),l=a(d),f=r(6),p=a(f),h=r(279),v=a(h),g=r(8),y=a(g),_=r(1),E=a(_),m=r(2),I=a(m),T=r(0),b=r(282),k=a(b),R=r(283),P=a(R),C=r(284),A=a(C),O=new k.default,S=new P.default,w=(n=(0,T.responseAdapter)(O.getContentWatchedResponse),function(e,t,r,a,n){var u={};Object.keys(a).forEach(function(e){u[e]=a[e]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},u),n&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(n):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(e,t,u),u=null)}((u=function(){function e(){(0,E.default)(this,e),this.apiRegistry=A.default}return(0,I.default)(e,[{key:"checkIfContentWatched",value:function(){var e=(0,y.default)(l.default.mark(function e(t){var r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,e.prev=1,e.next=4,this.getContentWatched({key:t.id});case 4:if(a=e.sent,!(0,v.default)(a.elapsedTime)){e.next=11;break}return e.next=8,this.setContentWatched({key:t.id});case 8:r=!1,e.next=12;break;case 11:r=!0;case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",p.default.reject(e.t0));case 17:return e.abrupt("return",{contentWatched:r});case 18:case"end":return e.stop()}},e,this,[[1,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getContentWatched",value:function(){var e=(0,y.default)(l.default.mark(function e(t){var r,a,n,u,s,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},a={},e.prev=2,n=t.key,u=S.getAuthToken(),a.pathVars={id:n},s={type:"xml",headers:{hotstarauth:u},skipCache:!0},i=this.apiRegistry.getPath(a,"getContentWatched"),e.next=12,T.HttpLib.get(i,s);case 12:r=e.sent,e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(2),e.abrupt("return",p.default.reject(e.t0));case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}},e,this,[[2,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"setContentWatched",value:function(){var e=(0,y.default)(l.default.mark(function e(t){var r,a,n,u,s,i,o,d,f;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,a=t.key,n=t.elapsedTime,u=S.getAuthToken(),s="text",i="text",o=(0,c.default)({},a,{uniqueId:a,elapsedTime:n}),d={type:s,data:o,headers:{hotstarauth:u},respType:i},f=this.apiRegistry.getPath({},"setContentWatched"),e.next=12,T.HttpLib.post(f,d);case 12:r=e.sent,e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",p.default.reject(e.t0));case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}},e,this,[[1,15]])}));return function(t){return e.apply(this,arguments)}}()}]),e}()).prototype,"getContentWatched",[n],(0,i.default)(u.prototype,"getContentWatched"),u.prototype),u);t.default=(0,T.registerOperations)("TYRIAN",w)},function(e,t,r){e.exports={default:r(280),__esModule:!0}},function(e,t,r){r(281),e.exports=r(10).Number.isNaN},function(e,t,r){var a=r(13);a(a.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),n=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=function e(){(0,n.default)(this,e),this.getContentWatchedResponse=function(e){try{return JSON.parse(e.text)}catch(e){return{elapsedTime:NaN}}}}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(22),u=a(n),s=r(3),i=a(s),o=r(1),c=a(o),d=r(4),l=a(d),f=r(5),p=a(f),h=r(0),v=a(h),g=r(32),y=a(g),_=v.default.constants;t.default=function(e){function t(){var e;(0,c.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return r.authKeys=(e={},(0,u.default)(e,_.PROD_ENV,"af8ddcda9d2bb569efb6f8cab2dc856003971e4e2e33416bd42fe699a290e4c0"),(0,u.default)(e,_.STAG_ENV,"af8ddcda9d2bb569efb6f8cab2dc856003971e4e2e33416bd42fe699a290e4c0"),(0,u.default)(e,_.QA_ENV,"af8ddcda9d2bb569efb6f8cab2dc856003971e4e2e33416bd42fe699a290e4c0"),(0,u.default)(e,_.PP_ENV,"af8ddcda9d2bb569efb6f8cab2dc856003971e4e2e33416bd42fe699a290e4c0"),(0,u.default)(e,_.LOAD_ENV,"af8ddcda9d2bb569efb6f8cab2dc856003971e4e2e33416bd42fe699a290e4c0"),e),r}return(0,p.default)(t,e),t}(y.default)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),u=a(n),s=r(3),i=a(s),o=r(1),c=a(o),d=r(4),l=a(d),f=r(5),p=a(f),h=r(0),v=a(h),g=r(16),y=a(g),_=[{endPoint:v.default.constants.USER_VIEWED_CONTENT_PLATFORM,apis:{getContentWatched:{route:"?id={id}"},setContentWatched:{route:"/"}}}];t.default=new(function(e){function t(){(0,c.default)(this,t);var e=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e.apiConfigs=[].concat(_,(0,u.default)(e.apiConfigs||[])),e._defaultOptions={apiVersion:"v1",appVersion:"5.0.40"},e}return(0,p.default)(t,e),t}(y.default))},function(e,t,r){"use strict";var a=r(286),n=function(e){return e&&e.__esModule?e:{default:e}}(a);(0,r(0).registerOperations)("UMSV2",n.default)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,a,n){var u={};return Object.keys(a).forEach(function(e){u[e]=a[e]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},u),n&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(n):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(e,t,u),u=null),u}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.code=t.code||t.errorCode||e,U.default.reject((0,Z.default)(t))}}function s(e){if(!(e instanceof Object)||"Y"!==e.canWatch)throw e;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,c,d,l,f,p,h=r(12),v=a(h),g=r(37),y=a(g),_=r(9),E=a(_),m=r(7),I=a(m),T=r(8),b=a(T),k=r(22),R=a(k),P=r(3),C=a(P),A=r(1),O=a(A),S=r(2),w=a(S),x=r(4),N=a(x),M=r(5),D=a(M),L=r(6),U=a(L),W=r(0),V=a(W),G=r(287),j=a(G),H=r(289),Y=a(H),q=r(49),F=a(q),B=r(32),K=a(B),z=r(19),Q=r(108),J=a(Q),X=r(114),Z=a(X),$=r(112),ee=a($),te=r(89),re=a(te),ae=r(291),ne=r(87),ue=V.default.constants,se=new F.default,ie=new j.default,oe=V.default.HttpLib,ce=V.default.adapters.requestAdapter,de=V.default.adapters.responseAdapter,le=W.utils.baseUtils,fe=new re.default;t.default=(i=ce(ie.isAllowPlaybackRequest),o=de(ie.isAllowPlaybackResponse),c=de(ie.checkConcurrencyResponse),d=de(ie.canDoPaymentResponse),l=de(ie.checkAggreGatedContentRightsResponse),f=de(ee.default.getVideoUrlV2Response,ae.doNothingAdapter),p=function(e){function t(){var e;(0,O.default)(this,t);var r=(0,N.default)(this,(t.__proto__||(0,C.default)(t)).call(this));return r.authKeys=(e={},(0,R.default)(e,ue.PROD_ENV,"6AE6AC5CB24397A25CA15E04DF4F9885"),(0,R.default)(e,ue.STAG_ENV,"6AE6AC5CB24397A25CA15E04DF4F9885"),(0,R.default)(e,ue.QA_ENV,"6AE6AC5CB24397A25CA15E04DF4F9885"),(0,R.default)(e,ue.PP_ENV,"6AE6AC5CB24397A25CA15E04DF4F9885"),(0,R.default)(e,ue.LOAD_ENV,"6AE6AC5CB24397A25CA15E04DF4F9885"),e),r.apiRegistry=Y.default,r}return(0,D.default)(t,e),(0,w.default)(t,[{key:"isAllowPlayback",value:function(){var e=(0,b.default)(I.default.mark(function e(t){var r,a,n,u,s;return I.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},a={},n={},u={},s=void 0,e.prev=5,e.next=8,this.checkGeoRights(t);case 8:if(n=e.sent,"Y"!==(u=n).canWatch){e.next=16;break}return e.next=13,this.checkAggreGatedContentRights(t);case 13:a=e.sent,s=a.description||{},u=a;case 16:if("Y"!==u.canWatch||t.isGdprCountry){e.next=21;break}return e.next=19,this.checkConcurrency(t);case 19:r=e.sent,u=r;case 21:u.originalReq=t,u.entitlementDescription=s,e.next=28;break;case 25:e.prev=25,e.t0=e.catch(5),u=e.t0;case 28:return e.abrupt("return",u);case 29:case"end":return e.stop()}},e,this,[[5,25]])}));return function(t){return e.apply(this,arguments)}}()},{key:"checkConcurrency",value:function(){var e=(0,b.default)(I.default.mark(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return I.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se.refreshToken(this._checkConcurrency.bind(this),t,r));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeConcurrency",value:function(){var e=(0,b.default)(I.default.mark(function e(t){return I.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se.refreshToken(this._removeConcurrency.bind(this),t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"checkGeoRights",value:function(){var e=(0,b.default)(I.default.mark(function e(t){var r,a,n,u,s,i,o,c,d;return I.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={canWatch:"Y"},a=z.ENTITLEMENT_V1_ERROR_TYPE.GEO,n=z.SLATE_ACTION_TYPE.GEO,u="",s=le.getNewObjectCopy(z.defaultIsAllowPlayBackResponse),i={},e.prev=6,i.skipCache=!0,(o=t.geoCheckUrl)&&!t.isIntl&&t.isPremium){e.next=11;break}return e.abrupt("return",U.default.resolve(s));case 11:return c=this.getAuthToken(),o=o+"?hotstarauth="+c,e.next=15,oe.get(o,i);case 15:return d=e.sent,r.canWatch="no"!==d.allowed?"Y":"N","N"===r.canWatch&&(u="This content is currently not available in your region."),e.abrupt("return",(0,E.default)({},r,{message:u,errorCode:a,actionCode:n,httpStatus:d.httpStatus,apiErrorMessage:d.message}));case 21:return e.prev=21,e.t0=e.catch(6),console.log(e.t0),e.abrupt("return",U.default.resolve(s));case 25:case"end":return e.stop()}},e,this,[[6,21]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_checkConcurrency",value:function(){var e=(0,b.default)(I.default.mark(function e(t){var r,a,n,u,s,i,o;return I.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},a={},n={},u=le.getNewObjectCopy(z.defaultIsAllowPlayBackResponse),e.prev=4,t.isPremium&&t.userId){e.next=7;break}return e.abrupt("return",U.default.resolve(u));case 7:return n.userId=t.userId,n.deviceId=t.deviceId,a.pathVars=n,a.type="json",a.skipCache=!0,s=se.getAuthToken(),i={hotstarauth:s},a.headers=i,o=this.apiRegistry.getPath(a,"checkConcurrency"),e.next=18,oe.get(o,a);case 18:return r=e.sent,e.abrupt("return",r);case 22:return e.prev=22,e.t0=e.catch(4),e.abrupt("return",U.default.resolve(e.t0));case 25:case"end":return e.stop()}},e,this,[[4,22]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_removeConcurrency",value:function(){var e=(0,b.default)(I.default.mark(function e(t){var r,a,n,u,s,i,o;return I.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},a={},n={},u=le.getNewObjectCopy(z.defaultIsAllowPlayBackResponse),e.prev=4,t.isPremium){e.next=7;break}return e.abrupt("return",U.default.resolve(u));case 7:return n.userId=t.userId,n.deviceId=t.deviceId,a.pathVars=n,a.type="json",a.skipCache=!0,s=se.getAuthToken(),i={hotstarauth:s},a.headers=i,o=this.apiRegistry.getPath(a,"checkConcurrency"),e.next=18,oe.delete(o,a);case 18:return r=e.sent,e.abrupt("return",r);case 22:return e.prev=22,e.t0=e.catch(4),e.abrupt("return",U.default.resolve(e.t0));case 25:case"end":return e.stop()}},e,this,[[4,22]])}));return function(t){return e.apply(this,arguments)}}()},{key:"canDoPayment",value:function(){var e=(0,b.default)(I.default.mark(function e(){var t,r,a,n,u;return I.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,r={},a=se.getAuthToken(),n={hotstarauth:a},r.headers=n,r.type="xml",u=this.apiRegistry.getPath(r,"canDoPayment"),e.next=10,oe.get(u,r);case 10:return t=e.sent,e.abrupt("return",t);case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",U.default.reject(e.t0));case 17:case"end":return e.stop()}},e,this,[[1,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"checkAggreGatedContentRights",value:function(){var e=(0,b.default)(I.default.mark(function e(t){var r;return I.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=le.getNewObjectCopy(z.defaultIsAllowPlayBackResponse),t.isPremium){e.next=3;break}return e.abrupt("return",U.default.resolve(r));case 3:if(t.userId){e.next=9;break}return r.canWatch="N",r.message="You need a Premium Membership to watch this video.",r.errorCode="CACR",r.actionCode="PREMIUM",e.abrupt("return",U.default.resolve(r));case 9:return e.abrupt("return",se.refreshToken(this._checkAggreGatedContentRights.bind(this),t));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_checkAggreGatedContentRights",value:function(){var e=(0,b.default)(I.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f;return I.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,a={},n={},u=new Date,s=u.getTime(),i={timeStamp:s},o=(t.channel||"web").toLowerCase(),n.contentId=t.contentId,n.platform="chromecast"===o||"appletv"===o?o:"web",a.pathVars=n,a.type="json",a.querystring=i,c=t.userId,d=se.getAuthToken(),l={hotstarauth:d,userIdentityToken:c,"stream-platform":o.toUpperCase()},a.headers=l,f=this.apiRegistry.getPath(a,"checkAggreGatedContentRights"),e.next=20,oe.get(f,a);case 20:return r=e.sent,e.abrupt("return",r);case 24:return e.prev=24,e.t0=e.catch(1),e.abrupt("return",U.default.resolve(e.t0));case 27:case"end":return e.stop()}},e,this,[[1,24]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getCompositePlaybackUrl",value:function(e,t){var r=t||{deviceIdPath:"device.deviceId"};return se.refreshToken(this._getCompositePlaybackUrl.bind(this),e,r).catch(u())}},{key:"_getCompositePlaybackUrl",value:function(){var e=(0,b.default)(I.default.mark(function e(t){var r,a,n,u,s,i,o,c,d,l,f,p,h,v,g,y,_,m,T,b,k,R,P,C,A,O;return I.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.reqHeaders,a=void 0===r?{}:r,n=t.reqConfig,u=void 0===n?{}:n,s=(0,E.default)({},a),i={},o={},c={},d=t.content,l=t.device,f=t.userId,p=t.fingerPrint,h=d.contentId,v=V.default.config.initConfig.getConfig()||{},g=v.country,y="getCompositePlaybackUrl",o.contentId=h,i["device-id"]=encodeURIComponent(l.deviceId),i["desired-config"]=(0,ne.generateTagsString)(t.tags,"|"),i["os-name"]=encodeURIComponent(l.osName),i["os-version"]=l.osVersion,s.hotstarauth=se.getAuthToken(),s["X-HS-UserToken"]=f,s["X-HS-Platform"]=l.client,s["X-HS-AppVersion"]=l.clientVersion,s["X-Request-Id"]=t.requestId,s["X-Country-Code"]=g,p&&(s["X-HS-Tkey"]=p),_=this.apiRegistry.getPath({querystring:i,pathVars:o},y),e.next=25,oe.get(_,{headers:s,skipCache:!0,fetchParams:u});case 25:return c=e.sent,m=(0,J.default)(c,"data",{}),T=m.playBackSets,b=void 0===T?[]:T,k=m.match,R=void 0!==k&&k,P=m.drmClass,C=void 0===P?"":P,A=(0,J.default)(c,"additionalInfo"),e.abrupt("return",{success:!0,isMatch:R,playbackSets:b,drmClass:C,additionalInfo:A});case 31:return e.prev=31,e.t0=e.catch(0),O=(0,Z.default)(e.t0),e.abrupt("return",U.default.reject(O));case 35:case"end":return e.stop()}},e,this,[[0,31]])}));return function(t){return e.apply(this,arguments)}}()},{key:"verifyAndReturnPlaybackUrl",value:function(e){e.device instanceof Object&&(e.deviceId=e.device.deviceId);var t={deviceIdPath:"device.deviceId",userIdPath:"userId"};try{var r=this.checkGeoRights(e).then(s).catch(u(z.ENTITLEMENT_V1_ERROR_TYPE.GEO)),a=this.checkConcurrency(e,t).then(s).catch(u(z.ENTITLEMENT_V1_ERROR_TYPE.CONCURRENCY)),n=e.personaData?fe.getWatchPercentage(e):U.default.resolve(0),i=(0,E.default)({},t,{invalidErrorCode:z.PLAYBACK_COMPOSITE_ERROR_TYPE.JWT_TOKEN_EXPIRED}),o=this.getCompositePlaybackUrl(e,i);return le.combineCalls([o,n,r,a]).catch(function(e){var t=e.find(function(e){return void 0!==e});return t.errorList=e,U.default.reject(t)}).then(function(e){var t=(0,y.default)(e,2),r=t[0];return r.watchPercentage=t[1]||0,r})}catch(e){return U.default.reject(e)}}}]),t}(K.default),n(p.prototype,"isAllowPlayback",[i,o],(0,v.default)(p.prototype,"isAllowPlayback"),p.prototype),n(p.prototype,"_checkConcurrency",[c],(0,v.default)(p.prototype,"_checkConcurrency"),p.prototype),n(p.prototype,"canDoPayment",[d],(0,v.default)(p.prototype,"canDoPayment"),p.prototype),n(p.prototype,"_checkAggreGatedContentRights",[l],(0,v.default)(p.prototype,"_checkAggreGatedContentRights"),p.prototype),n(p.prototype,"getCompositePlaybackUrl",[f],(0,v.default)(p.prototype,"getCompositePlaybackUrl"),p.prototype),p)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(9),u=a(n),s=r(3),i=a(s),o=r(1),c=a(o),d=r(2),l=a(d),f=r(4),p=a(f),h=r(5),v=a(h),g=r(19),y=r(0),_=r(288),E=a(_),m=r(48),I=a(m),T=new y.HttpStatusMessages(E.default),b=y.utils.baseUtils;t.default=function(e){function t(){var e,r,a,n;(0,c.default)(this,t);for(var s=arguments.length,o=Array(s),d=0;s>d;d++)o[d]=arguments[d];return r=a=(0,p.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(o))),a.isAllowPlaybackRequest=function(e){return e},a.isAllowPlaybackResponse=function(e){var t=b.getNewObjectCopy(g.defaultIsAllowPlayBackResponse);return t.entitlementDescription=e.entitlementDescription||{},"N"===e.canWatch&&(t.canWatch="N",t.message=e.message||"",t.isDeviceError=e.isDeviceError||"",t.errorCode=e.errorCode||"DEFAULT_FAIL",t.actionCode=e.actionCode||"DEFAULT_ACTION",t.description=e.description||{},t.httpStatusCode=e.httpStatus||{},t.apiErrorMessage=e.apiErrorMessage||"",t.metadata=e.metadata||{},t.appCode=e.appCode||{}),e.refreshTokenFailed&&(t.errorCode=e.errorCode,t.appCode=e.appCode,t.refreshTokenFailed=e.refreshTokenFailed),t},a.checkConcurrencyResponse=function(e){var t=e.errorCode,r=void 0===t?g.ENTITLEMENT_V1_ERROR_TYPE.CONCURRENCY:t,n=e.appCode,s=void 0===n?"":n,i=e.httpStatus,o=e.metadata,c=void 0===o?{}:o,d=e.message,l=g.SLATE_ACTION_TYPE.CONCURRENCY,f=b.getNewObjectCopy(g.defaultIsAllowPlayBackResponse),p=a.isConcurrentStreamPlaying(e),h=T.getMessage("checkConcurrency",i);return(0,u.default)({},f,{canWatch:p?"N":"Y",message:h,appCode:s,metadata:c,errorCode:r,actionCode:l,httpStatus:i,apiErrorMessage:d})},a.canDoPayment=function(e){return 200===e.httpStatus},a.canDoPaymentResponse=function(e){return{canShowPayWall:a.canDoPayment(e)?"Y":"N",errorCode:"CANDOPAYEMT",httpStatus:e.httpStatus}},a.checkAggreGatedContentRightsResponse=function(e){var t=void 0,r=a.isPanic(e),n=a.isEntitlementCheckValid(e),s=T.getMessage("checkConcurrency",e.httpStatus);return n?e.canWatch="Y":(e.canWatch="N",t=a.getActionCodeForEntitlementFailure(e),s=s||T.getMessage("checkAggreGatedContentRights",e.httpStatus||"DEFAULT")),(0,u.default)({},e,{message:s,isPanic:r,errorCode:"CACR",actionCode:t,httpStatus:e.httpStatus,apiErrorMessage:e.message})},a.isEntitlementCheckValid=function(e){return e.httpStatus>199&&300>e.httpStatus},n=r,(0,p.default)(a,n)}return(0,v.default)(t,e),(0,l.default)(t,[{key:"getActionCodeForEntitlementFailure",value:function(e){var t=this.getActionCodeForHttpStatusCode(e);return t||(t=this.getActionCodeForAppCode(e)),t||(t="PREMIUM"),t}},{key:"getActionCodeForHttpStatusCode",value:function(e){return{"-1":"NETWORK_UNAVAILABLE",402:"PREMIUM"}[e.httpStatus]}},{key:"getActionCodeForAppCode",value:function(e){return{UMSP_8404:"PLAYER_ERROR",UM_ENT_1401:"GEO",UM_ENT_1402:"GEO",UM_ENT_1403:"GEO",UM_ENT_1404:"GEO",UM_ENT_1406:"GEO",UM_ENT_1407:"GEO"}[e.appCode]}},{key:"isConcurrentStreamPlaying",value:function(e){var t=e.httpStatus;return 401===t||403===t||429===t}},{key:"isPanic",value:function(e){return 422===e.httpStatus}}]),t}(I.default)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={checkConcurrency:{407:{webMsg:"Sorry, more than one premium video is being requested from this account. Please close other videos and try again."},429:{webMsg:"Oops, something went wrong. Please try again in sometime. For help, write to help@hotstar.com."},401:{webMsg:"Oops, something went wrong. Please login again and retry."}},checkAggreGatedContentRights:{DEFAULT:{webMsg:"You need a Premium Membership to watch this video."},404:{webMsg:"Uh-oh, this content is not available!"},412:{webMsg:"Requested content is invalid."},402:{webMsg:"Subscription pack is not purchased."}}}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),u=a(n),s=r(3),i=a(s),o=r(1),c=a(o),d=r(4),l=a(d),f=r(5),p=a(f),h=r(290),v=a(h),g=r(16),y=a(g);t.default=new(function(e){function t(){(0,c.default)(this,t);var e=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e.apiConfigs=[].concat((0,u.default)(v.default),(0,u.default)(e.apiConfigs||[])),e._defaultOptions={apiVersion:"v2"},e}return(0,p.default)(t,e),t}(y.default))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),n=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=[{endPoint:n.default.constants.UMS_PLATFORM,apis:{checkAggreGatedContentRights:{route:"/{apiVersion}/{platform}/{countryCode}/entitlement/content/{contentId}/"}}},{endPoint:n.default.constants.UMS_CONCURRENCY_PLATFORM,apis:{checkConcurrency:{route:"/{apiVersion}/{platform}/{countryCode}/entitlement/device/{deviceId}/{userId}/"}}},{endPoint:n.default.constants.UMS_CAN_DO_PAYMENT,apis:{canDoPayment:{route:"/service/um"}}},{endPoint:n.default.constants.UMS_COMPOSITE_PLAYBACK,apis:{getCompositePlaybackUrl:{route:"/v1/playback/content/{contentId}"}}}]},function(e,t,r){"use strict";function a(e){var t=Array.isArray(e)?e:[e];return function(e){return t.reduce(function(e,t){return t instanceof Function?t(e):e},e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetCacheableEntries=t.cacheable=t.doNothingAdapter=t.requestAdapter=t.responseAdapter=void 0;var n=r(6),u=function(e){return e&&e.__esModule?e:{default:e}}(n);t.responseAdapter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return function(r,n,s){var i=s.value;return s.value=function(){var r=arguments,n=this;return new u.default(function(u,s){i.apply(n,Array.prototype.slice.call(r)).then(function(t){var r=a(e)(t);void 0===r.success||r.success?u(r):s(r)}).catch(function(e){var r=a(t)(e);s(r)})})},s}},t.requestAdapter=function(e){return function(t,r,a){var n=a.value;return a.value=function(){var t=e(Array.prototype.slice.call(arguments)[0]);return n.call(this,t)},a}},t.doNothingAdapter=function(e){return e},t.cacheable=function(){return function(e,t,r){return Array.isArray(e.obj_cacheable_entries)?e.obj_cacheable_entries.push(t):e.obj_cacheable_entries=[t],r}},t.resetCacheableEntries=function(){({})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(293),n=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=(0,r(0).registerOperations)("BIFROST",n.default)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),u=a(n),s=r(6),i=a(s),o=r(8),c=a(o),d=r(1),l=a(d),f=r(2),p=a(f),h=r(294),v=a(h),g=r(0),y=a(g),_=y.default.HttpLib;t.default=function(){function e(){(0,l.default)(this,e)}return(0,p.default)(e,[{key:"concurrencyHeartbeat",value:function(){var e=(0,c.default)(u.default.mark(function e(){var t,r,a,n,s,o,c,d,l,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,r=f.data,a=void 0===r?{}:r,n=f.config,o=(s=void 0===n?{}:n).basePath,c=v.default.getPath({},"heartbeat",o),d={"Hs-Client-Timestamp":Date.now(),"Schema-Name":s.schemaName||"heartbeat","Schema-Version":s.schemaVersion||"1",Authorization:"Basic "+s.token},l={data:a,headers:d},e.next=9,_.post(c,l);case 9:(t=e.sent).error=!1,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(1),console.warn("Error::concurrencyHeartbeat::",e.t0),e.abrupt("return",i.default.resolve({error:!0,requestData:f.data}));case 17:return e.abrupt("return",t);case 18:case"end":return e.stop()}},e,this,[[1,13]])}));return function(){return e.apply(this,arguments)}}()}]),e}()},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),u=a(n),s=r(3),i=a(s),o=r(1),c=a(o),d=r(4),l=a(d),f=r(5),p=a(f),h=r(295),v=a(h),g=r(16),y=a(g);t.default=new(function(e){function t(){(0,c.default)(this,t);var e=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e.apiConfigs=[].concat((0,u.default)(v.default),(0,u.default)(e.apiConfigs||[])),e._defaultOptions={apiVersion:"v1"},e}return(0,p.default)(t,e),t}(y.default))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0);t.default=[{endPoint:function(e){return e&&e.__esModule?e:{default:e}}(a).default.constants.BIFROST,apis:{heartbeat:{route:"/{apiVersion}/events/heartbeat"}}}]}],[218])}(r(72))}("undefined"!=typeof self&&self)}}]);